!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10),g>=1&&g<8&&(d.isOldIOSPhone=!0))}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(i<4.4&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var l,m,j=["transform","perspective","animationName"],k=["","webkit","Moz","ms","O"],n=0;n<4;n++){c=k[n];for(var o=0;o<3;o++)l=j[o],m=c+(c?l.charAt(0).toUpperCase()+l.slice(1):l),!d[l]&&m in b&&(d[l]=m);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var f,e=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(f=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+f])return!1}else c["oldIE"+f]=g;a[e]("on"+f,c["oldIE"+f])}else a[e]("on"+f,c)});var f=this,g=25,h=3,i={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.5},maxSpreadZoom:2,scaleMode:"fit",modal:!0,alwaysFadeIn:!1};e.extend(i,d);var k,l,m,n,o,p,t,u,v,x,y,z,A,B,C,E,G,H,J,K,L,M,N,O,Q,S,T,U,V,W,X,Y,Ia,Ja,Ra,Ua,Va,Wa,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,kb,lb,ob,pb,qb,rb,sb,Jb,j=function(){return{x:0,y:0}},q=j(),r=j(),s=j(),w={},D=0,F=j(),I=0,P=!0,R=[],Z={},$=function(a,b){e.extend(f,b.publicMethods),R.push(a)},_=function(a){var b=cc();return a>b-1?a-b:a<0?b+a:a},aa={},ba=function(a,b){return aa[a]||(aa[a]=[]),aa[a].push(b)},ca=function(a){var b=aa[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},da=function(){return(new Date).getTime()},ea=function(a){rb=a,f.bg.style.opacity=a*i.bgOpacity},fa=function(a,b,c,d){a[N]=z+b+"px, "+c+"px"+A+" scale("+d+")"},ga=function(){kb&&fa(kb,s.x,s.y,x)},ha=function(a){a.container&&fa(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel)},ia=function(a,b){b[N]=z+a+"px, 0px"+A},ja=function(a,b){if(!i.loop&&b){var c=n+(F.x*D-a)/F.x,d=Math.round(a-jb.x);(c<0&&d>0||c>=cc()-1&&d<0)&&(a=jb.x+d*i.mainScrollEndFriction)}jb.x=a,ia(a,o)},ka=function(a,b){var c=mb[a]-E[a];return r[a]+q[a]+c-c*(b/y)},la=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},ma=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},na=null,oa=function(){na&&(e.unbind(document,"mousemove",oa),e.addClass(a,"pswp--has_mouse"),i.mouseUsed=!0,ca("mouseUsed")),na=setTimeout(function(){na=null},100)},pa=function(){e.bind(document,"keydown",f),Y.transform&&e.bind(f.scrollWrap,"click",f),i.mouseUsed||e.bind(document,"mousemove",oa),e.bind(window,"resize scroll",f),ca("bindEvents")},qa=function(){e.unbind(window,"resize",f),e.unbind(window,"scroll",v.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",oa),Y.transform&&e.unbind(f.scrollWrap,"click",f),$a&&e.unbind(window,t,f),ca("unbindEvents")},ra=function(a,b){var c=gc(f.currItem,w,a);return b&&(ib=c),c},sa=function(a){return a||(a=f.currItem),a.initialZoomLevel},ta=function(a){return a||(a=f.currItem),a.w>0?i.maxSpreadZoom:1},ua=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=ka(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]&&(c[a]=b.max[a],!0))},va=function(){if(N){var b=Y.perspective&&!Q;return z="translate"+(b?"3d(":"("),void(A=Y.perspective?", 0px)":")")}N="left",e.addClass(a,"pswp--ie"),ia=function(a,b){b.left=a+"px"},ha=function(a){var b=a.fitRatio>1?1:a.fitRatio,c=a.container.style,d=b*a.w,e=b*a.h;c.width=d+"px",c.height=e+"px",c.left=a.initialPosition.x+"px",c.top=a.initialPosition.y+"px"},ga=function(){if(kb){var a=kb,b=f.currItem,c=b.fitRatio>1?1:b.fitRatio,d=c*b.w,e=c*b.h;a.width=d+"px",a.height=e+"px",a.left=s.x+"px",a.top=s.y+"px"}}},wa=function(a){var b="";i.escKey&&27===a.keyCode?b="close":i.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},xa=function(a){a&&(bb||ab||lb||Va)&&(a.preventDefault(),a.stopPropagation())},ya=function(){f.setScrollOffset(0,e.getScrollY())},za={},Aa=0,Ba=function(a){za[a]&&(za[a].raf&&T(za[a].raf),Aa--,delete za[a])},Ca=function(a){za[a]&&Ba(a),za[a]||(Aa++,za[a]={})},Da=function(){for(var a in za)za.hasOwnProperty(a)&&Ba(a)},Ea=function(a,b,c,d,e,f,g){var i,h=da();Ca(a);var j=function(){if(za[a]){if(i=da()-h,i>=d)return Ba(a),f(c),void(g&&g());f((c-b)*e(i/d)+b),za[a].raf=S(j)}};j()},Fa={shout:ca,listen:ba,viewportSize:w,options:i,isMainScrollAnimating:function(){return lb},getZoomLevel:function(){return x},getCurrentIndex:function(){return n},isDragging:function(){return $a},isZooming:function(){return fb},setScrollOffset:function(a,b){E.x=a,X=E.y=b},applyZoomPan:function(a,b,c){s.x=b,s.y=c,x=a,ga()},init:function(){if(!k&&!l){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),U=a.className,k=!0,Y=e.detectFeatures(),S=Y.raf,T=Y.caf,N=Y.transform,W=Y.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),o=f.container.style,f.itemHolders=G=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],G[0].el.style.display=G[2].el.style.display="none",va(),v={resize:f.updateSize,scroll:ya,keydown:wa,click:xa};var d=Y.isOldIOSPhone||Y.isOldAndroid||Y.isMobileOpera;for(Y.animationName&&Y.transform&&!d||(i.showAnimationDuration=i.hideAnimationDuration=0),c=0;c<R.length;c++)f["init"+R[c]]();if(b){var g=f.ui=new b(f,e);g.init()}ca("firstUpdate"),n=n||i.index||0,(isNaN(n)||n<0||n>=cc())&&(n=0),f.currItem=bc(n),(Y.isOldIOSPhone||Y.isOldAndroid)&&(P=!1),i.modal&&(a.setAttribute("aria-hidden","false"),P?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===X&&(ca("initialLayout"),X=V=e.getScrollY());var j="pswp--open ";for(i.mainClass&&(j+=i.mainClass+" "),i.showHideOpacity&&(j+="pswp--animate_opacity "),j+=Q?"pswp--touch":"pswp--notouch",j+=Y.animationName?" pswp--css_animation":"",j+=Y.svg?" pswp--svg":"",e.addClass(a,j),f.updateSize(),p=-1,I=null,c=0;c<h;c++)ia((c+p)*F.x,G[c].el.style);W||e.bind(f.scrollWrap,u,f),ba("initialZoomInEnd",function(){f.setContent(G[0],n-1),f.setContent(G[2],n+1),G[0].el.style.display=G[2].el.style.display="block",i.focus&&a.focus(),pa()}),f.setContent(G[1],n),f.updateCurrItem(),ca("afterInit"),P||(B=setInterval(function(){Aa||$a||fb||x!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){k&&(k=!1,l=!0,ca("close"),qa(),Wb(f.currItem,null,!0,f.destroy))},destroy:function(){ca("destroy"),Vb&&clearTimeout(Vb),i.modal&&(a.setAttribute("aria-hidden","true"),a.className=U),B&&clearInterval(B),e.unbind(f.scrollWrap,u,f),e.unbind(window,"scroll",f),wb(),Da(),aa=null},panTo:function(a,b,c){c||(a>ib.min.x?a=ib.min.x:a<ib.max.x&&(a=ib.max.x),b>ib.min.y?b=ib.min.y:b<ib.max.y&&(b=ib.max.y)),s.x=a,s.y=b,ga()},handleEvent:function(a){a=a||window.event,v[a.type]&&v[a.type](a)},goTo:function(a){a=_(a);var b=a-n;I=b,n=a,f.currItem=bc(n),D-=b,ja(F.x*D),Da(),lb=!1,f.updateCurrItem()},next:function(){f.goTo(n+1)},prev:function(){f.goTo(n-1)},updateCurrZoomItem:function(a){if(a&&ca("beforeChange",0),G[1].el.children.length){var b=G[1].el.children[0];kb=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else kb=null;ib=f.currItem.bounds,y=x=f.currItem.initialZoomLevel,s.x=ib.center.x,s.y=ib.center.y,a&&ca("afterChange")},invalidateCurrItems:function(){C=!0;for(var a=0;a<h;a++)G[a].item&&(G[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==I){var c,b=Math.abs(I);if(!(a&&b<2)){f.currItem=bc(n),ca("beforeChange",I),b>=h&&(p+=I+(I>0?-h:h),b=h);for(var d=0;d<b;d++)I>0?(c=G.shift(),G[h-1]=c,p++,ia((p+2)*F.x,c.el.style),f.setContent(c,n-b+d+1+1)):(c=G.pop(),G.unshift(c),p--,ia(p*F.x,c.el.style),f.setContent(c,n+b-d-1-1));if(kb&&1===Math.abs(I)){var e=bc(H);e.initialZoomLevel!==x&&(gc(e,w),ha(e))}I=0,f.updateCurrZoomItem(),H=n,ca("afterChange")}}},updateSize:function(b){if(!P){var c=e.getScrollY();if(X!==c&&(a.style.top=c+"px",X=c),!b&&Z.x===window.innerWidth&&Z.y===window.innerHeight)return;Z.x=window.innerWidth,Z.y=window.innerHeight,a.style.height=Z.y+"px"}if(w.x=f.scrollWrap.clientWidth,w.y=f.scrollWrap.clientHeight,E={x:0,y:X},F.x=w.x+Math.round(w.x*i.spacing),F.y=w.y,ja(F.x*D),ca("beforeResize"),void 0!==p){for(var d,g,j,k=0;k<h;k++)d=G[k],ia((k+p)*F.x,d.el.style),j=n+k-1,i.loop&&cc()>2&&(j=_(j)),g=bc(j),g&&(C||g.needsUpdate||!g.bounds)?(f.cleanSlide(g),f.setContent(d,j),1===k&&(f.currItem=g,f.updateCurrZoomItem(!0)),g.needsUpdate=!1):d.index===-1&&j>=0&&f.setContent(d,j),g&&g.container&&(gc(g,w),ha(g));C=!1}y=x=f.currItem.initialZoomLevel,ib=f.currItem.bounds,ib&&(s.x=ib.center.x,s.y=ib.center.y,ga()),ca("resize")},zoomTo:function(a,b,c,d,f){b&&(y=x,mb.x=Math.abs(b.x)-s.x,mb.y=Math.abs(b.y)-s.y,la(r,s));var g=ra(a,!1),h={};ua("x",g,h,a),ua("y",g,h,a);var i=x,j={x:s.x,y:s.y};ma(h);var k=function(b){1===b?(x=a,s.x=h.x,s.y=h.y):(x=(a-i)*b+i,s.x=(h.x-j.x)*b+j.x,s.y=(h.y-j.y)*b+j.y),f&&f(b),ga()};c?Ea("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},Ga=30,Ha=10,Ka={},La={},Ma={},Na={},Oa={},Pa=[],Qa={},Sa=[],Ta={},Xa=0,Ya=j(),Za=0,jb=j(),mb=j(),nb=j(),tb=function(a,b){return a.x===b.x&&a.y===b.y},ub=function(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g},vb=function(a,b){return Ta.x=Math.abs(a.x-b.x),Ta.y=Math.abs(a.y-b.y),Math.sqrt(Ta.x*Ta.x+Ta.y*Ta.y)},wb=function(){cb&&(T(cb),cb=null)},xb=function(){$a&&(cb=S(xb),Ob())},yb=function(){return!("fit"===i.scaleMode&&x===f.currItem.initialZoomLevel)},zb=function(a,b){return!!a&&(!(a.className&&a.className.indexOf("pswp__scroll-wrap")>-1)&&(b(a)?a:zb(a.parentNode,b)))},Ab={},Bb=function(a,b){return Ab.prevent=!zb(a.target,i.isClickableElement),ca("preventDragEvent",a,b,Ab),Ab.prevent},Cb=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Db=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Eb=function(a,b,c){if(a-Ja>50){var d=Sa.length>2?Sa.shift():{};d.x=b,d.y=c,Sa.push(d),Ja=a}},Fb=function(){var a=s.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(w.y/2))},Gb={},Hb={},Ib=[],Kb=function(a){for(;Ib.length>0;)Ib.pop();return O?(Jb=0,Pa.forEach(function(a){0===Jb?Ib[0]=a:1===Jb&&(Ib[1]=a),Jb++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Ib[0]=Cb(a.touches[0],Gb),a.touches.length>1&&(Ib[1]=Cb(a.touches[1],Hb))):(Gb.x=a.pageX,Gb.y=a.pageY,Gb.id="",Ib[0]=Gb),Ib},Lb=function(a,b){var c,g,l,m,d=0,e=s[a]+b[a],h=b[a]>0,j=jb.x+b.x,k=jb.x-Qa.x;return c=e>ib.min[a]||e<ib.max[a]?i.panEndFriction:1,e=s[a]+b[a]*c,!i.allowPanToNext&&x!==f.currItem.initialZoomLevel||(kb?"h"!==ob||"x"!==a||ab||(h?(e>ib.min[a]&&(c=i.panEndFriction,d=ib.min[a]-e,g=ib.min[a]-r[a]),(g<=0||k<0)&&cc()>1?(m=j,k<0&&j>Qa.x&&(m=Qa.x)):ib.min.x!==ib.max.x&&(l=e)):(e<ib.max[a]&&(c=i.panEndFriction,d=e-ib.max[a],g=r[a]-ib.max[a]),(g<=0||k>0)&&cc()>1?(m=j,k>0&&j<Qa.x&&(m=Qa.x)):ib.min.x!==ib.max.x&&(l=e))):m=j,"x"!==a)?void(lb||db||x>f.currItem.fitRatio&&(s[a]+=b[a]*c)):(void 0!==m&&(ja(m,!0),db=m!==Qa.x),ib.min.x!==ib.max.x&&(void 0!==l?s.x=l:db||(s.x+=b.x*c)),void 0!==m)},Mb=function(a){if(!("mousedown"===a.type&&a.button>0)){if(_b)return void a.preventDefault();if(!Wa||"mousedown"!==a.type){if(Bb(a,!0)&&a.preventDefault(),ca("pointerDown"),O){var b=e.arraySearch(Pa,a.pointerId,"id");b<0&&(b=Pa.length),Pa[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Kb(a),d=c.length;eb=null,Da(),$a&&1!==d||($a=pb=!0,e.bind(window,t,f),Ua=sb=qb=Va=db=bb=_a=ab=!1,ob=null,ca("firstTouchStart",c),la(r,s),q.x=q.y=0,la(Na,c[0]),la(Oa,Na),Qa.x=F.x*D,Sa=[{x:Na.x,y:Na.y}],Ja=Ia=da(),ra(x,!0),wb(),xb()),!fb&&d>1&&!lb&&!db&&(y=x,ab=!1,fb=_a=!0,q.y=q.x=0,la(r,s),la(Ka,c[0]),la(La,c[1]),Db(Ka,La,nb),mb.x=Math.abs(nb.x)-s.x,mb.y=Math.abs(nb.y)-s.y,gb=hb=vb(Ka,La))}}},Nb=function(a){if(a.preventDefault(),O){var b=e.arraySearch(Pa,a.pointerId,"id");if(b>-1){var c=Pa[b];c.x=a.pageX,c.y=a.pageY}}if($a){var d=Kb(a);if(ob||bb||fb)eb=d;else{var f=Math.abs(d[0].x-Na.x)-Math.abs(d[0].y-Na.y);Math.abs(f)>=Ha&&(ob=f>0?"h":"v",eb=d)}}},Ob=function(){if(eb){var a=eb.length;if(0!==a)if(la(Ka,eb[0]),Ma.x=Ka.x-Na.x,Ma.y=Ka.y-Na.y,fb&&a>1){if(Na.x=Ka.x,Na.y=Ka.y,!Ma.x&&!Ma.y&&tb(eb[1],La))return;la(La,eb[1]),ab||(ab=!0,ca("zoomGestureStarted"));var b=vb(Ka,La),c=Tb(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(sb=!0);var d=1,e=sa(),g=ta();if(c<e)if(i.pinchToClose&&!sb&&y<=f.currItem.initialZoomLevel){var h=e-c,j=1-h/(e/1.2);ea(j),ca("onPinchClose",j),qb=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>g&&(d=(c-g)/(6*e),d>1&&(d=1),c=g+d*e);d<0&&(d=0),gb=b,Db(Ka,La,Ya),q.x+=Ya.x-nb.x,q.y+=Ya.y-nb.y,la(nb,Ya),s.x=ka("x",c),s.y=ka("y",c),Ua=c>x,x=c,ga()}else{if(!ob)return;if(pb&&(pb=!1,Math.abs(Ma.x)>=Ha&&(Ma.x-=eb[0].x-Oa.x),Math.abs(Ma.y)>=Ha&&(Ma.y-=eb[0].y-Oa.y)),Na.x=Ka.x,Na.y=Ka.y,0===Ma.x&&0===Ma.y)return;if("v"===ob&&i.closeOnVerticalDrag&&!yb()){q.y+=Ma.y,s.y+=Ma.y;var k=Fb();return Va=!0,ca("onVerticalDrag",k),ea(k),void ga()}Eb(da(),Ka.x,Ka.y),bb=!0,ib=f.currItem.bounds;var l=Lb("x",Ma);l||(Lb("y",Ma),ma(s),ga())}}},Pb=function(a){if(Y.isOldAndroid){if(Wa&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(Wa),Wa=setTimeout(function(){Wa=0},600))}ca("pointerUp"),Bb(a,!1)&&a.preventDefault();var b;if(O){var c=e.arraySearch(Pa,a.pointerId,"id");if(c>-1)if(b=Pa.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var h,g=Kb(a),i=g.length;if("mouseup"===a.type&&(i=0),2===i)return eb=null,!0;1===i&&la(Oa,g[0]),0!==i||ob||lb||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),ca("touchRelease",a,b));var j=-1;if(0===i&&($a=!1,e.unbind(window,t,f),wb(),fb?j=0:Za!==-1&&(j=da()-Za)),Za=1===i?da():-1,h=j!==-1&&j<150?"zoom":"swipe",fb&&i<2&&(fb=!1,1===i&&(h="zoomPointerUp"),ca("zoomGestureEnded")),eb=null,bb||ab||lb||Va)if(Da(),Ra||(Ra=Qb()),Ra.calculateSwipeSpeed("x"),Va){var k=Fb();if(k<.6)f.close();else{var l=s.y,m=rb;Ea("verticalDrag",0,1,300,e.easing.cubic.out,function(a){s.y=(f.currItem.initialPosition.y-l)*a+l,ea((1-m)*a+m),ga()}),ca("onVerticalDrag",1)}}else{if((db||lb)&&0===i){var n=Sb(h,Ra);if(n)return;h="zoomPointerUp"}if(!lb)return"swipe"!==h?void Ub():void(!db&&x>f.currItem.fitRatio&&Rb(Ra))}},Qb=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){Sa.length>1?(a=da()-Ja+50,b=Sa[Sa.length-2][d]):(a=da()-Ia,b=Oa[d]),c.lastFlickOffset[d]=Na[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/a:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(s[a]>ib.min[a]?c.backAnimDestination[a]=ib.min[a]:s[a]<ib.max[a]&&(c.backAnimDestination[a]=ib.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,Ea("bounceZoomPan"+a,s[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){s[a]=b,ga()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,s[a]+=c.distanceOffset[a])},panAnimLoop:function(){if(za.zoomPan&&(za.zoomPan.raf=S(c.panAnimLoop),c.now=da(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),ga(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05))return s.x=Math.round(s.x),s.y=Math.round(s.y),ga(),void Ba("zoomPan")}};return c},Rb=function(a){return a.calculateSwipeSpeed("y"),ib=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05?(a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0):(Ca("zoomPan"),a.lastNow=da(),void a.panAnimLoop())},Sb=function(a,b){var c;lb||(Xa=n);var d;if("swipe"===a){var g=Na.x-Oa.x,h=b.lastFlickDist.x<10;g>Ga&&(h||b.lastFlickOffset.x>20)?d=-1:g<-Ga&&(h||b.lastFlickOffset.x<-20)&&(d=1)}var j;d&&(n+=d,n<0?(n=i.loop?cc()-1:0,j=!0):n>=cc()&&(n=i.loop?0:cc()-1,j=!0),j&&!i.loop||(I+=d,D-=d,c=!0));var m,k=F.x*D,l=Math.abs(k-jb.x);return c||k>jb.x==b.lastFlickSpeed.x>0?(m=Math.abs(b.lastFlickSpeed.x)>0?l/Math.abs(b.lastFlickSpeed.x):333,m=Math.min(m,400),m=Math.max(m,250)):m=333,Xa===n&&(c=!1),lb=!0,ca("mainScrollAnimStart"),Ea("mainScroll",jb.x,k,m,e.easing.cubic.out,ja,function(){Da(),lb=!1,Xa=-1,(c||Xa!==n)&&f.updateCurrItem(),ca("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Tb=function(a){return 1/hb*a*y},Ub=function(){var a=x,b=sa(),c=ta();x<b?a=b:x>c&&(a=c);var g,d=1,h=rb;return qb&&!Ua&&!sb&&x<b?(f.close(),!0):(qb&&(g=function(a){ea((d-h)*a+h)}),f.zoomTo(a,0,300,e.easing.cubic.out,g),!0)};$("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){J=a+b,K=a+c,L=a+d,M=e?a+e:""};O=Y.pointerEvent,O&&Y.touch&&(Y.touch=!1),O?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):Y.touch?(a("touch","start","move","end","cancel"),Q=!0):a("mouse","down","move","up"),t=K+" "+L+" "+M,u=J,O&&!Q&&(Q=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=Q,v[J]=Mb,v[K]=Nb,v[L]=Pb,M&&(v[M]=v[L]),Y.touch&&(u+=" mousedown",t+=" mousemove mouseup",v.mousedown=v[J],v.mousemove=v[K],v.mouseup=v[L]),Q||(i.allowPanToNext=!1)}}});var Vb,Xb,$b,_b,bc,cc,dc,Wb=function(b,c,d,g){Vb&&clearTimeout(Vb),_b=!0,$b=!0;var h;b.initialLayout?(h=b.initialLayout,b.initialLayout=null):h=i.getThumbBoundsFn&&i.getThumbBoundsFn(n);var j=d?i.hideAnimationDuration:i.showAnimationDuration,k=function(){Ba("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(ea(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),ca("initialZoom"+(d?"OutEnd":"InEnd"))),g&&g(),_b=!1};if(!j||!h||void 0===h.x){var l=function(){ca("initialZoom"+(d?"Out":"In")),x=b.initialZoomLevel,la(s,b.initialPosition),ga(),a.style.opacity=d?0:1,ea(1),k()};return void l()}var o=function(){var c=m,g=!f.currItem.src||f.currItem.loadError||i.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(x=h.w/b.w,s.x=h.x,s.y=h.y-V,f[g?"template":"bg"].style.opacity=.001,ga()),Ca("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),g&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),Vb=setTimeout(function(){if(ca("initialZoom"+(d?"Out":"In")),d){var f=h.w/b.w,i={x:s.x,y:s.y},l=x,m=rb,n=function(b){1===b?(x=f,s.x=h.x,s.y=h.y-X):(x=(f-l)*b+l,s.x=(h.x-i.x)*b+i.x,s.y=(h.y-X-i.y)*b+i.y),ga(),g?a.style.opacity=1-b:ea(m-b*m)};c?Ea("initialZoom",0,1,j,e.easing.cubic.out,n,k):(n(1),Vb=setTimeout(k,j+20))}else x=b.initialZoomLevel,la(s,b.initialPosition),ga(),ea(1),g?a.style.opacity=1:ea(1),Vb=setTimeout(k,j+20)},d?25:90)};o()},Yb={},Zb=[],ac={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Xb.length}},ec=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},fc=function(a,b,c){var d=a.bounds;d.center.x=Math.round((Yb.x-b)/2),d.center.y=Math.round((Yb.y-c)/2)+a.vGap.top,d.max.x=b>Yb.x?Math.round(Yb.x-b):d.center.x,d.max.y=c>Yb.y?Math.round(Yb.y-c)+a.vGap.top:d.center.y,d.min.x=b>Yb.x?0:d.center.x,d.min.y=c>Yb.y?a.vGap.top:d.center.y},gc=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),ca("parseVerticalMargin",a)),Yb.x=b.x,Yb.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=Yb.x/a.w,f=Yb.y/a.h;a.fitRatio=e<f?e:f;var g=i.scaleMode;"orig"===g?c=1:"fit"===g&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=ec())}if(!c)return;return fc(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=ec(),a.initialPosition=a.bounds.center,a.bounds},hc=function(a,b,c,d,e,g){if(!b.loadError){var h,j=f.isDragging()&&!f.isZooming(),k=a===n||f.isMainScrollAnimating()||j;!e&&(Q||i.alwaysFadeIn)&&k&&(h=!0),d&&(h&&(d.style.opacity=0),b.imageAppended=!0,kc(d,b.w,b.h),c.appendChild(d),h&&setTimeout(function(){d.style.opacity=1,g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500)},50))}},ic=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},jc=function(a,b){if(a.src&&a.loadError&&a.container)return b&&(a.container.innerHTML=""),a.container.innerHTML=i.errorMsg.replace("%url%",a.src),!0},kc=function(a,b,c){a.style.width=b+"px",a.style.height=c+"px"},lc=function(){if(Zb.length){for(var a,b=0;b<Zb.length;b++)a=Zb[b],a.holder.index===a.index&&hc(a.index,a.item,a.baseDiv,a.img);Zb=[]}};$("Controller",{publicMethods:{lazyLoadItem:function(a){a=_(a);var b=bc(a);!b||b.loaded||b.loading||(ca("gettingData",a,b),b.src&&ic(b))},initController:function(){e.extend(i,ac,!0),f.items=Xb=c,bc=f.getItemAt,cc=i.getNumItemsFn,dc=i.loop,cc()<3&&(i.loop=!1),ba("beforeChange",function(a){var g,b=i.preload,c=null===a||a>0,d=Math.min(b[0],cc()),e=Math.min(b[1],cc());for(g=1;g<=(c?e:d);g++)f.lazyLoadItem(n+g);for(g=1;g<=(c?d:e);g++)f.lazyLoadItem(n-g)}),ba("initialLayout",function(){f.currItem.initialLayout=i.getThumbBoundsFn&&i.getThumbBoundsFn(n)}),ba("mainScrollAnimComplete",lc),ba("initialZoomInEnd",lc),ba("destroy",function(){for(var a,b=0;b<Xb.length;b++)a=Xb[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);Zb=null})},getItemAt:function(a){return a>=0&&(void 0!==Xb[a]&&Xb[a])},allowProgressiveImg:function(){return i.forceProgressiveLoading||!Q||i.mouseUsed||screen.width>1200},setContent:function(a,b){i.loop&&(b=_(b));var c=f.getItemAt(a.index);c&&(c.container=null);var g,d=f.getItemAt(b);if(!d)return void(a.el.innerHTML="");ca("gettingData",b,d),a.index=b,a.item=d;var h=d.container=e.createEl("pswp__zoom-wrap");if(!d.src&&d.html&&(d.html.tagName?h.appendChild(d.html):h.innerHTML=d.html),jc(d),!d.src||d.loadError||d.loaded)d.src&&!d.loadError&&(g=e.createEl("pswp__img","img"),g.style.webkitBackfaceVisibility="hidden",g.style.opacity=1,g.src=d.src,kc(g,d.w,d.h),hc(b,d,h,g,!0));else{if(d.loadComplete=function(c){if(k){if(c.img&&(c.img.style.webkitBackfaceVisibility="hidden"),a&&a.index===b){if(jc(c,!0))return c.loadComplete=c.img=null,gc(c,w),ha(c),void(a.index===n&&f.updateCurrZoomItem());c.imageAppended?!_b&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):Y.transform&&(lb||_b)?Zb.push({item:c,baseDiv:h,img:c.img,index:b,holder:a}):hc(b,c,h,c.img,lb||_b)}c.loadComplete=null,c.img=null,ca("imageLoadComplete",b,c)}},e.features.transform){var j="pswp__img pswp__img--placeholder";j+=d.msrc?"":" pswp__img--placeholder--blank";var l=e.createEl(j,d.msrc?"img":"");d.msrc&&(l.src=d.msrc),kc(l,d.w,d.h),h.appendChild(l),d.placeholder=l}d.loading||ic(d),f.allowProgressiveImg()&&(!$b&&Y.transform?Zb.push({item:d,baseDiv:h,img:d.img,index:b,holder:a}):hc(b,d,h,d.img,!0,!0))}gc(d,w),$b||b!==n?ha(d):(kb=h.style,Wb(d,g||d.img)),a.el.innerHTML="",a.el.appendChild(h)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var mc,nc={},oc=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};$("Tap",{publicMethods:{initTap:function(){ba("firstTouchStart",f.onTapStart),ba("touchRelease",f.onTapRelease),ba("destroy",function(){nc={},mc=null})},onTapStart:function(a){a.length>1&&(clearTimeout(mc),mc=null)},onTapRelease:function(a,b){if(b&&!bb&&!_a&&!Aa){var c=b;if(mc&&(clearTimeout(mc),mc=null,ub(c,nc)))return void ca("doubleTap",c);if("mouse"===b.type)return void oc(a,b,"mouse");var d=a.target.tagName.toUpperCase();if("BUTTON"===d||e.hasClass(a.target,"pswp__single-tap"))return void oc(a,b);la(nc,c),mc=setTimeout(function(){oc(a,b),mc=null},300)}}}});var pc;$("DesktopZoom",{publicMethods:{initDesktopZoom:function(){W||(Q?ba("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){pc={};var c="wheel mousewheel DOMMouseScroll";ba("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),ba("unbindEvents",function(){pc&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),x<1?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};ba("resize",g),ba("afterChange",g),ba("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),ba("pointerUp",h),b||g()},handleMouseWheel:function(a){if(x<=f.currItem.fitRatio)return i.closeOnScroll?N&&Math.abs(a.deltaY)>2&&(m=!0,f.close()):a.preventDefault(),!0;if(a.preventDefault(),a.stopPropagation(),pc.x=0,"deltaX"in a)1===a.deltaMode?(pc.x=18*a.deltaX,pc.y=18*a.deltaY):(pc.x=a.deltaX,pc.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(pc.x=-.16*a.wheelDeltaX),a.wheelDeltaY?pc.y=-.16*a.wheelDeltaY:pc.y=-.16*a.wheelDelta;else{if(!("detail"in a))return;pc.y=a.detail}ra(x,!0),f.panTo(s.x-pc.x,s.y-pc.y)},toggleDesktopZoom:function(b){b=b||{x:w.x/2,y:w.y/2+X};var c=i.getDoubleTapZoom(!0,f.currItem),d=x===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var rc,sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,qc={history:!0,galleryUID:1},Dc=function(){return Bc.hash.substring(1)},Ec=function(){rc&&clearTimeout(rc),tc&&clearTimeout(tc)},Fc=function(){var a=Dc(),b={};if(a.length<5)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");e.length<2||(b[e[0]]=e[1])}return b.pid=parseInt(b.pid,10)-1,b.pid<0&&(b.pid=0),b},Gc=function(){if(tc&&clearTimeout(tc),Aa||$a)return void(tc=setTimeout(Gc,500));uc?clearTimeout(sc):uc=!0;var a=xc+"&gid="+i.galleryUID+"&pid="+(n+1);yc||Bc.hash.indexOf(a)===-1&&(Ac=!0);var b=Bc.href.split("#")[0]+"#"+a;Cc?"#"+a!==window.location.hash&&history[yc?"replaceState":"pushState"]("",document.title,b):yc?Bc.replace(b):Bc.hash=a,yc=!0,sc=setTimeout(function(){uc=!1},60)};$("History",{publicMethods:{initHistory:function(){if(e.extend(i,qc,!0),i.history){Bc=window.location,Ac=!1,zc=!1,yc=!1,xc=Dc(),Cc="pushState"in history,xc.indexOf("gid=")>-1&&(xc=xc.split("&gid=")[0],xc=xc.split("?gid=")[0]),ba("afterChange",f.updateURL),ba("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){wc=!0,zc||(Ac?history.back():xc?Bc.hash=xc:Cc?history.pushState("",document.title,Bc.pathname+Bc.search):Bc.hash=""),Ec()};ba("unbindEvents",function(){m&&a()}),ba("destroy",function(){wc||a()}),ba("firstUpdate",function(){n=Fc().pid});var b=xc.indexOf("pid=");b>-1&&(xc=xc.substring(0,b),"&"===xc.slice(-1)&&(xc=xc.slice(0,-1))),setTimeout(function(){k&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){return Dc()===xc?(zc=!0,void f.close()):void(uc||(vc=!0,f.goTo(Fc().pid),vc=!1))},updateURL:function(){Ec(),vc||(yc?rc=setTimeout(Gc,800):Gc())}}}),e.extend(f,Fa)};return a});