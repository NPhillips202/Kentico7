/*! PhotoSwipe - v4.0.5 - 2015-01-15
* http://photoswipe.com
* Copyright (c) 2015 Dmitry Semenov; */
!function(n,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():n.PhotoSwipe=t()}(this,function(){"use strict";return function(n,t,i,r){var f={features:null,bind:function(n,t,i,r){var f=(r?"remove":"add")+"EventListener",u;for(t=t.split(" "),u=0;u<t.length;u++)t[u]&&n[f](t[u],i,!1)},isArray:function(n){return n instanceof Array},createEl:function(n,t){var i=document.createElement(t||"div");return n&&(i.className=n),i},getScrollY:function(){var n=window.pageYOffset;return void 0!==n?n:document.documentElement.scrollTop},unbind:function(n,t,i){f.bind(n,t,i,!0)},removeClass:function(n,t){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className=n.className.replace(i," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(n,t){f.hasClass(n,t)||(n.className+=(n.className?" ":"")+t)},hasClass:function(n,t){return n.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n.className)},getChildByClass:function(n,t){for(var i=n.firstChild;i;){if(f.hasClass(i,t))return i;i=i.nextSibling}},arraySearch:function(n,t,i){for(var r=n.length;r--;)if(n[r][i]===t)return r;return-1},extend:function(n,t,i){for(var r in t)if(t.hasOwnProperty(r)){if(i&&n.hasOwnProperty(r))continue;n[r]=t[r]}},easing:{sine:{out:function(n){return Math.sin(n*(Math.PI/2))},inOut:function(n){return-(Math.cos(Math.PI*n)-1)/2}},cubic:{out:function(n){return--n*n*n+1}}},detectFeatures:function(){var l,i,h,r,e,c;if(f.features)return f.features;var y=f.createEl(),v=y.style,t="",n={};(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,n.pointerEvent)||(l=navigator.userAgent,/iP(hone|od)/.test(navigator.platform)&&(i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i&&i.length>0&&(i=parseInt(i[1],10),i>=1&&8>i&&(n.isOldIOSPhone=!0))),h=l.match(/Android\s([0-9\.]*)/),r=h?h[1]:0,r=parseFloat(r),r>=1&&(4.4>r&&(n.isOldAndroid=!0),n.androidVersion=r),n.isMobileOpera=/opera mini|opera mobi/i.test(l));for(var u,o,p=["transform","perspective","animationName"],a=["","webkit","Moz","ms","O"],s=0;4>s;s++){for(t=a[s],e=0;3>e;e++)u=p[e],o=t+(t?u.charAt(0).toUpperCase()+u.slice(1):u),!n[u]&&o in v&&(n[u]=o);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}return n.raf||(c=0,n.raf=function(n){var i=+new Date,t=Math.max(0,16-(i-c)),r=window.setTimeout(function(){n(i+t)},t);return c=i+t,r},n.caf=function(n){clearTimeout(n)}),n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,f.features=n,n}},ri,eu,fu,ct;f.detectFeatures(),f.features.oldIE&&(f.bind=function(n,t,i,r){t=t.split(" ");for(var u,e=(r?"detach":"attach")+"Event",o=function(){i.handleEvent.call(i)},f=0;f<t.length;f++)if(u=t[f])if("object"==typeof i&&i.handleEvent){if(r){if(!i["oldIE"+u])return!1}else i["oldIE"+u]=o;n[e]("on"+u,i["oldIE"+u])}else n[e]("on"+u,i)});var u=this,ve=25,kt=3,o={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(n){return"A"===n.tagName},getDoubleTapZoom:function(n,t){return n?1:t.initialZoomLevel<.7?1:1.5},maxSpreadZoom:2,scaleMode:"fit",modal:!0,alwaysFadeIn:!1};f.extend(o,r);var hi,uo,fe,s,ge,bt,sr,ku,b,l,ai,ae,ce,le,df,to,kf,y,so,rf,wu,gr,cu,kr,ii,at,uu,re,oo,tu,te,fr,a,ye,bu,hr,ue,yr,nu,wt,wf,pi,ir,tf,ei,ft,yt,be,pe,h,pt,d,oi,ee,vu,lu,yu,pu,ni=function(){return{x:0,y:0}},gt=ni(),gi=ni(),e=ni(),g={},fi=0,et=ni(),st=0,du=!0,oe=[],or={},lr=function(n,t){f.extend(u,t.publicMethods),oe.push(n)},au=function(n){var t=ut();return n>t-1?n-t:0>n?t+n:n},vr={},v=function(n,t){return vr[n]||(vr[n]=[]),vr[n].push(t)},c=function(n){var i=vr[n],r,t;if(i)for(r=Array.prototype.slice.call(arguments),r.shift(),t=0;t<i.length;t++)i[t].apply(u,r)},ht=function(){return+new Date},vt=function(n){lu=n,u.bg.style.opacity=n*o.bgOpacity},ke=function(n,t,i,r){n[kr]=ae+t+"px, "+i+"px"+ce+" scale("+r+")"},p=function(){pt&&ke(pt,e.x,e.y,l)},ru=function(n){n.container&&ke(n.container.style,n.initialPosition.x,n.initialPosition.y,n.initialZoomLevel)},rr=function(n,t){t[kr]=ae+n+"px, 0px"+ce},gu=function(n,t){if(!o.loop&&t){var r=s+(et.x*fi-n)/et.x,i=Math.round(n-ti.x);(0>r&&i>0||r>=ut()-1&&0>i)&&(n=ti.x+i*o.mainScrollEndFriction)}ti.x=n,rr(n,ge)},bf=function(n,t){var i=ar[n]-to[n];return gi[n]+gt[n]+i-i*(t/ai)},it=function(n,t){n.x=t.x,n.y=t.y,t.id&&(n.id=t.id)},yo=function(n){n.x=Math.round(n.x),n.y=Math.round(n.y)},ne=null,ie=function(){ne&&(f.unbind(document,"mousemove",ie),f.addClass(n,"pswp--has_mouse"),o.mouseUsed=!0,c("mouseUsed")),ne=setTimeout(function(){ne=null},100)},rh=function(){f.bind(document,"keydown",u),a.transform&&f.bind(u.scrollWrap,"click",u),o.mouseUsed||f.bind(document,"mousemove",ie),f.bind(window,"resize scroll",u),c("bindEvents")},vs=function(){f.unbind(window,"resize",u),f.unbind(window,"scroll",b.scroll),f.unbind(document,"keydown",u),f.unbind(document,"mousemove",ie),a.transform&&f.unbind(u.scrollWrap,"click",u),wt&&f.unbind(window,sr,u),c("unbindEvents")},gf=function(n,t){var i=er(u.currItem,g,n);return t&&(h=i),i},ao=function(n){return n||(n=u.currItem),n.initialZoomLevel},lo=function(n){return n||(n=u.currItem),n.w>0?o.maxSpreadZoom:1},po=function(n,t,i,r){return r===u.currItem.initialZoomLevel?(i[n]=u.currItem.initialPosition[n],!0):(i[n]=bf(n,r),i[n]>t.min[n]?(i[n]=t.min[n],!0):i[n]<t.max[n]?(i[n]=t.max[n],!0):!1)},es=function(){if(kr){var t=a.perspective&&!at;return ae="translate"+(t?"3d(":"("),void(ce=a.perspective?", 0px)":")")}kr="left",f.addClass(n,"pswp--ie"),rr=function(n,t){t.left=n+"px"},ru=function(n){var t=n.container.style,r=n.fitRatio*n.w,i=n.fitRatio*n.h;t.width=r+"px",t.height=i+"px",t.left=n.initialPosition.x+"px",t.top=n.initialPosition.y+"px"},p=function(){if(pt){var t=pt,n=u.currItem,r=n.fitRatio*n.w,i=n.fitRatio*n.h;t.width=r+"px",t.height=i+"px",t.left=e.x+"px",t.top=e.y+"px"}}},cs=function(n){var t="";o.escKey&&27===n.keyCode?t="close":o.arrowKeys&&(37===n.keyCode?t="prev":39===n.keyCode&&(t="next")),t&&(n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||(n.preventDefault?n.preventDefault():n.returnValue=!1,u[t]()))},hs=function(n){n&&(ir||pi||d||yr)&&(n.preventDefault(),n.stopPropagation())},as=function(){kf=!0,o.closeOnScroll&&hi&&(!u.likelyTouchDevice||o.mouseUsed)&&Math.abs(f.getScrollY()-tu)>2&&(fe=!0,u.close())},rt={},iu=0,wr=function(n){rt[n]&&(rt[n].raf&&re(rt[n].raf),iu--,delete rt[n])},he=function(n){rt[n]&&wr(n),rt[n]||(iu++,rt[n]={})},pr=function(){for(var n in rt)rt.hasOwnProperty(n)&&wr(n)},br=function(n,t,i,r,u,f,e){var s,h=ht(),o;he(n),o=function(){if(rt[n]){if(s=ht()-h,s>=r)return wr(n),f(i),void(e&&e());f((i-t)*u(s/r)+t),rt[n].raf=uu(o)}},o()},ss={shout:c,listen:v,viewportSize:g,options:o,isMainScrollAnimating:function(){return d},getZoomLevel:function(){return l},getCurrentIndex:function(){return s},isDragging:function(){return wt},isZooming:function(){return yt},applyZoomPan:function(n,t,i){e.x=t,e.y=i,l=n,p()},init:function(){var i,e,h,r;if(!hi&&!uo){for(u.framework=f,u.template=n,u.bg=f.getChildByClass(n,"pswp__bg"),oo=n.className,hi=!0,a=f.detectFeatures(),uu=a.raf,re=a.caf,kr=a.transform,te=a.oldIE,u.scrollWrap=f.getChildByClass(n,"pswp__scroll-wrap"),u.container=f.getChildByClass(u.scrollWrap,"pswp__container"),ge=u.container.style,u.itemHolders=y=[{el:u.container.children[0],wrap:0,index:-1},{el:u.container.children[1],wrap:0,index:-1},{el:u.container.children[2],wrap:0,index:-1}],y[0].el.style.display=y[2].el.style.display="none",es(),b={resize:u.updateSize,scroll:as,keydown:cs,click:hs},e=a.isOldIOSPhone||a.isOldAndroid||a.isMobileOpera,a.animationName&&a.transform&&!e||(o.showAnimationDuration=o.hideAnimationDuration=0),i=0;i<oe.length;i++)u["init"+oe[i]]();for(t&&(h=u.ui=new t(u,f),h.init()),c("firstUpdate"),s=s||o.index||0,(isNaN(s)||0>s||s>=ut())&&(s=0),u.currItem=si(s),(a.isOldIOSPhone||a.isOldAndroid)&&(du=!1),o.modal&&(n.setAttribute("aria-hidden","false"),du?n.style.position="fixed":(n.style.position="absolute",n.style.top=f.getScrollY()+"px")),void 0===fr&&(c("initialLayout"),fr=tu=f.getScrollY()),r="pswp--open ",o.mainClass&&(r+=o.mainClass+" "),o.showHideOpacity&&(r+="pswp--animate_opacity "),r+=at?"pswp--touch":"pswp--notouch",r+=a.animationName?" pswp--css_animation":"",r+=a.svg?" pswp--svg":"",f.addClass(n,r),u.updateSize(),bt=-1,st=null,i=0;kt>i;i++)rr((i+bt)*et.x,y[i].el.style);te||f.bind(u.scrollWrap,ku,u),v("initialZoomInEnd",function(){u.setContent(y[0],s-1),u.setContent(y[2],s+1),y[0].el.style.display=y[2].el.style.display="block",o.focus&&n.focus(),rh()}),u.setContent(y[1],s),u.updateCurrItem(),c("afterInit"),du||(le=setInterval(function(){iu||wt||yt||l!==u.currItem.initialZoomLevel||u.updateSize()},1e3)),f.addClass(n,"pswp--visible")}},close:function(){hi&&(hi=!1,uo=!0,c("close"),vs(),we(u.currItem,null,!0,u.destroy))},destroy:function(){c("destroy"),yi&&clearTimeout(yi),o.modal&&(n.setAttribute("aria-hidden","true"),n.className=oo),le&&clearInterval(le),f.unbind(u.scrollWrap,ku,u),f.unbind(window,"scroll",u),sf(),pr(),vr=null},panTo:function(n,t,i){i||(n>h.min.x?n=h.min.x:n<h.max.x&&(n=h.max.x),t>h.min.y?t=h.min.y:t<h.max.y&&(t=h.max.y)),e.x=n,e.y=t,p()},handleEvent:function(n){n=n||window.event,b[n.type]&&b[n.type](n)},goTo:function(n){n=au(n);var t=n-s;st=t,s=n,u.currItem=si(s),fi-=t,gu(et.x*fi),pr(),d=!1,u.updateCurrItem()},next:function(){u.goTo(s+1)},prev:function(){u.goTo(s-1)},updateCurrZoomItem:function(n){if(n&&c("beforeChange",0),y[1].el.children.length){var t=y[1].el.children[0];pt=f.hasClass(t,"pswp__zoom-wrap")?t.style:null}else pt=null;h=u.currItem.bounds,ai=l=u.currItem.initialZoomLevel,e.x=h.center.x,e.y=h.center.y,n&&c("afterChange")},invalidateCurrItems:function(){df=!0;for(var n=0;kt>n;n++)y[n].item&&(y[n].item.needsUpdate=!0)},updateCurrItem:function(n){var t,i,r,f;if(0!==st&&(i=Math.abs(st),!(n&&2>i))){for(u.currItem=si(s),c("beforeChange",st),i>=kt&&(bt+=st+(st>0?-kt:kt),i=kt),r=0;i>r;r++)st>0?(t=y.shift(),y[kt-1]=t,bt++,rr((bt+2)*et.x,t.el.style),u.setContent(t,s-i+r+1+1)):(t=y.pop(),y.unshift(t),bt--,rr(bt*et.x,t.el.style),u.setContent(t,s+i-r-2));pt&&1===Math.abs(st)&&(f=si(so),f.initialZoomLevel!==l&&(er(f,g),ru(f))),st=0,u.updateCurrZoomItem(),so=s,c("afterChange")}},updateSize:function(t){var w,a,i,v,r;if(!du){if(w=f.getScrollY(),fr!==w&&(n.style.top=w+"px",fr=w),!t&&or.x===window.innerWidth&&or.y===window.innerHeight)return;or.x=window.innerWidth,or.y=window.innerHeight,n.style.height=or.y+"px"}if(g.x=u.scrollWrap.clientWidth,g.y=u.scrollWrap.clientHeight,to={x:0,y:fr},et.x=g.x+Math.round(g.x*o.spacing),et.y=g.y,gu(et.x*fi),c("beforeResize"),void 0!==bt){for(r=0;kt>r;r++)a=y[r],rr((r+bt)*et.x,a.el.style),v=au(s+r-1),i=si(v),df||i.needsUpdate||!i.bounds?(i&&u.cleanSlide(i),u.setContent(a,v),1===r&&(u.currItem=i,u.updateCurrZoomItem(!0)),i.needsUpdate=!1):-1===a.index&&v>=0&&u.setContent(a,v),i&&i.container&&(er(i,g),ru(i));df=!1}ai=l=u.currItem.initialZoomLevel,h=u.currItem.bounds,h&&(e.x=h.center.x,e.y=h.center.y,p()),c("resize")},zoomTo:function(n,t,i,r,u){var c,o,a,s,h;t&&(ai=l,ar.x=Math.abs(t.x)-e.x,ar.y=Math.abs(t.y)-e.y,it(gi,e)),c=gf(n,!1),o={},po("x",c,o,n),po("y",c,o,n),a=l,s={x:e.x,y:e.y},yo(o),h=function(t){1===t?(l=n,e.x=o.x,e.y=o.y):(l=(n-a)*t+a,e.x=(o.x-s.x)*t+s.x,e.y=(o.y-s.y)*t+s.y),u&&u(t),p()},i?br("customZoomTo",0,1,i,r||f.easing.sine.inOut,h):h(1)}},ts=30,se=10,k={},vi={},nt={},tt={},tr={},ui=[],li={},ci=[],di={},hu=0,su=ni(),yf=0,ti=ni(),ar=ni(),nr=ni(),us=function(n,t){return n.x===t.x&&n.y===t.y},fs=function(n,t){return Math.abs(n.x-t.x)<ve&&Math.abs(n.y-t.y)<ve},bo=function(n,t){return di.x=Math.abs(n.x-t.x),di.y=Math.abs(n.y-t.y),Math.sqrt(di.x*di.x+di.y*di.y)},sf=function(){tf&&(re(tf),tf=null)},wo=function(){wt&&(tf=uu(wo),ys())},ih=function(){return!("fit"===o.scaleMode&&l===u.currItem.initialZoomLevel)},ko=function(n,t){return n?n.className&&n.className.indexOf("pswp__scroll-wrap")>-1?!1:t(n)?n:ko(n.parentNode,t):!1},lf={},rs=function(n,t){return lf.prevent=!ko(n.target,o.isClickableElement),c("preventDragEvent",n,t,lf),lf.prevent},ns=function(n,t){return t.x=n.pageX,t.y=n.pageY,t.id=n.identifier,t},go=function(n,t,i){i.x=.5*(n.x+t.x),i.y=.5*(n.y+t.y)},oh=function(n,t,i){if(n-bu>50){var r=ci.length>2?ci.shift():{};r.x=t,r.y=i,ci.push(r),bu=n}},vo=function(){var n=e.y-u.currItem.initialPosition.y;return 1-Math.abs(n/(g.y/2))},cr={},fh={},dt=[],cf=function(n){for(;dt.length>0;)dt.pop();return ii?(pu=0,ui.forEach(function(n){0===pu?dt[0]=n:1===pu&&(dt[1]=n),pu++})):n.type.indexOf("touch")>-1?n.touches&&n.touches.length>0&&(dt[0]=ns(n.touches[0],cr),n.touches.length>1&&(dt[1]=ns(n.touches[1],fh))):(cr.x=n.pageX,cr.y=n.pageY,cr.id="",dt[0]=cr),dt},is=function(n,t){var f,v,a,i,y=0,r=e[n]+t[n],p=t[n]>0,s=ti.x+t.x,c=ti.x-li.x;return f=r>h.min[n]||r<h.max[n]?o.panEndFriction:1,r=e[n]+t[n]*f,!o.allowPanToNext&&l!==u.currItem.initialZoomLevel||(pt?"h"!==oi||"x"!==n||pi||(p?(r>h.min[n]&&(f=o.panEndFriction,y=h.min[n]-r,v=h.min[n]-gi[n]),(0>=v||0>c)&&ut()>1?(i=s,0>c&&s>li.x&&(i=li.x)):h.min.x!==h.max.x&&(a=r)):(r<h.max[n]&&(f=o.panEndFriction,y=r-h.max[n],v=gi[n]-h.max[n]),(0>=v||c>0)&&ut()>1?(i=s,c>0&&s<li.x&&(i=li.x)):h.min.x!==h.max.x&&(a=r))):i=s,"x"!==n)?void(d||ei||l>u.currItem.fitRatio&&(e[n]+=t[n]*f)):(void 0!==i&&(gu(i,!0),ei=i===li.x?!1:!0),h.min.x!==h.max.x&&(void 0!==a?e.x=a:ei||(e.x+=t.x*f)),void 0!==i)},ws=function(n){var i,t,r;if(!("mousedown"===n.type&&n.button>0)){if(ur)return void n.preventDefault();nu&&"mousedown"===n.type||((rs(n,!0)&&n.preventDefault(),c("pointerDown"),ii)&&(i=f.arraySearch(ui,n.pointerId,"id"),0>i&&(i=ui.length),ui[i]={x:n.pageX,y:n.pageY,id:n.pointerId}),t=cf(n),r=t.length,ft=null,pr(),wt&&1!==r||(wt=ee=!0,f.bind(window,sr,u),ue=yu=vu=yr=ei=ir=wf=pi=!1,oi=null,c("firstTouchStart",t),it(gi,e),gt.x=gt.y=0,it(tt,t[0]),it(tr,tt),li.x=et.x*fi,ci=[{x:tt.x,y:tt.y}],bu=ye=ht(),gf(l,!0),sf(),wo()),!yt&&r>1&&!d&&!ei&&(ai=l,pi=!1,yt=wf=!0,gt.y=gt.x=0,it(gi,e),it(k,t[0]),it(vi,t[1]),go(k,vi,nr),ar.x=Math.abs(nr.x)-e.x,ar.y=Math.abs(nr.y)-e.y,be=pe=bo(k,vi)))}},ps=function(n){var r,u,t,i;(n.preventDefault(),ii)&&(r=f.arraySearch(ui,n.pointerId,"id"),r>-1&&(u=ui[r],u.x=n.pageX,u.y=n.pageY)),wt&&(t=cf(n),oi||ir||yt?ft=t:(i=Math.abs(t[0].x-tt.x)-Math.abs(t[0].y-tt.y),Math.abs(i)>=se&&(oi=i>0?"h":"v",ft=t)))},ys=function(){var s,a,n,y,v,r,w;if(ft&&(s=ft.length,0!==s))if(it(k,ft[0]),nt.x=k.x-tt.x,nt.y=k.y-tt.y,yt&&s>1){if(tt.x=k.x,tt.y=k.y,!nt.x&&!nt.y&&us(ft[1],vi))return;it(vi,ft[1]),pi||(pi=!0,c("zoomGestureStarted")),a=bo(k,vi),n=ks(a),n>u.currItem.initialZoomLevel+u.currItem.initialZoomLevel/15&&(yu=!0);var t=1,i=ao(),f=lo();i>n?o.pinchToClose&&!yu&&ai<=u.currItem.initialZoomLevel?(y=i-n,v=1-y/(i/1.2),vt(v),c("onPinchClose",v),vu=!0):(t=(i-n)/i,t>1&&(t=1),n=i-t*(i/3)):n>f&&(t=(n-f)/(6*i),t>1&&(t=1),n=f+t*i),0>t&&(t=0),be=a,go(k,vi,su),gt.x+=su.x-nr.x,gt.y+=su.y-nr.y,it(nr,su),e.x=bf("x",n),e.y=bf("y",n),ue=n>l,l=n,p()}else{if(!oi)return;if(ee&&(ee=!1,Math.abs(nt.x)>=se&&(nt.x-=ft[0].x-tr.x),Math.abs(nt.y)>=se&&(nt.y-=ft[0].y-tr.y)),tt.x=k.x,tt.y=k.y,0===nt.x&&0===nt.y)return;if("v"===oi&&o.closeOnVerticalDrag&&!ih())return gt.y+=nt.y,e.y+=nt.y,r=vo(),yr=!0,c("onVerticalDrag",r),vt(r),void p();oh(ht(),k.x,k.y),ir=!0,h=u.currItem.bounds,w=is("x",nt),w||(is("y",nt),yo(e),p())}},bs=function(n){var i,v,k,o,y,t,r,b,s,h,w;if(a.isOldAndroid){if(nu&&"mouseup"===n.type)return;n.type.indexOf("touch")>-1&&(clearTimeout(nu),nu=setTimeout(function(){nu=0},600))}if(c("pointerUp"),rs(n,!1)&&n.preventDefault(),ii&&(v=f.arraySearch(ui,n.pointerId,"id"),v>-1&&((i=ui.splice(v,1)[0],navigator.pointerEnabled)?i.type=n.pointerType||"mouse":(k={4:"mouse",2:"touch",3:"pen"},i.type=k[n.pointerType],i.type||(i.type=n.pointerType||"mouse")))),y=cf(n),t=y.length,"mouseup"===n.type&&(t=0),2===t)return ft=null,!0;if(1===t&&it(tr,y[0]),0!==t||oi||d||(i||("mouseup"===n.type?i={x:n.pageX,y:n.pageY,type:"mouse"}:n.changedTouches&&n.changedTouches[0]&&(i={x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY,type:"touch"})),c("touchRelease",n,i)),r=-1,0===t&&(wt=!1,f.unbind(window,sr,u),sf(),yt?r=0:-1!==yf&&(r=ht()-yf)),yf=1===t?ht():-1,o=-1!==r&&150>r?"zoom":"swipe",yt&&2>t&&(yt=!1,1===t&&(o="zoomPointerUp"),c("zoomGestureEnded")),ft=null,ir||pi||d||yr)if(pr(),hr||(hr=gs()),hr.calculateSwipeSpeed("x"),yr)b=vo(),.6>b?u.close():(s=e.y,h=lu,br("verticalDrag",0,1,300,f.easing.cubic.out,function(n){e.y=(u.currItem.initialPosition.y-s)*n+s,vt((1-h)*n+h),p()}),c("onVerticalDrag",1));else{if((ei||d)&&0===t){if(w=os(o,hr),w)return;o="zoomPointerUp"}if(!d)return"swipe"!==o?void ds():void(!ei&&l>u.currItem.fitRatio&&th(hr))}},gs=function(){var t,i,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){ci.length>1?(t=ht()-bu+50,i=ci[ci.length-2][r]):(t=ht()-ye,i=tr[r]),n.lastFlickOffset[r]=tt[r]-i,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickSpeed[r]=n.lastFlickDist[r]>20?n.lastFlickOffset[r]/t:0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(t,i){n.backAnimStarted[t]||(e[t]>h.min[t]?n.backAnimDestination[t]=h.min[t]:e[t]<h.max[t]&&(n.backAnimDestination[t]=h.max[t]),void 0!==n.backAnimDestination[t]&&(n.slowDownRatio[t]=.7,n.slowDownRatioReverse[t]=1-n.slowDownRatio[t],n.speedDecelerationRatioAbs[t]<.05&&(n.lastFlickSpeed[t]=0,n.backAnimStarted[t]=!0,br("bounceZoomPan"+t,e[t],n.backAnimDestination[t],i||300,f.easing.sine.out,function(n){e[t]=n,p()}))))},calculateAnimOffset:function(t){n.backAnimStarted[t]||(n.speedDecelerationRatio[t]=n.speedDecelerationRatio[t]*(n.slowDownRatio[t]+n.slowDownRatioReverse[t]-n.slowDownRatioReverse[t]*n.timeDiff/10),n.speedDecelerationRatioAbs[t]=Math.abs(n.lastFlickSpeed[t]*n.speedDecelerationRatio[t]),n.distanceOffset[t]=n.lastFlickSpeed[t]*n.speedDecelerationRatio[t]*n.timeDiff,e[t]+=n.distanceOffset[t])},panAnimLoop:function(){if(rt.zoomPan&&(rt.zoomPan.raf=uu(n.panAnimLoop),n.now=ht(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),p(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return e.x=Math.round(e.x),e.y=Math.round(e.y),p(),void wr("zoomPan")}};return n},th=function(n){return n.calculateSwipeSpeed("y"),h=u.currItem.bounds,n.backAnimDestination={},n.backAnimStarted={},Math.abs(n.lastFlickSpeed.x)<=.05&&Math.abs(n.lastFlickSpeed.y)<=.05?(n.speedDecelerationRatioAbs.x=n.speedDecelerationRatioAbs.y=0,n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),!0):(he("zoomPan"),n.lastNow=ht(),void n.panAnimLoop())},os=function(n,t){var r,e,a,v,l,i,h,y;return d||(hu=s),"swipe"===n&&(a=tt.x-tr.x,v=t.lastFlickDist.x<10,a>ts&&(v||t.lastFlickOffset.x>20)?e=-1:-ts>a&&(v||t.lastFlickOffset.x<-20)&&(e=1)),e&&(s+=e,0>s?(s=o.loop?ut()-1:0,l=!0):s>=ut()&&(s=o.loop?0:ut()-1,l=!0),(!l||o.loop)&&(st+=e,fi-=e,r=!0)),h=et.x*fi,y=Math.abs(h-ti.x),r||h>ti.x==t.lastFlickSpeed.x>0?(i=Math.abs(t.lastFlickSpeed.x)>0?y/Math.abs(t.lastFlickSpeed.x):333,i=Math.min(i,400),i=Math.max(i,250)):i=333,hu===s&&(r=!1),d=!0,br("mainScroll",ti.x,h,i,f.easing.cubic.out,gu,function(){pr(),d=!1,hu=-1,(r||hu!==s)&&u.updateCurrItem(),c("mainScrollAnimComplete")}),r&&u.updateCurrItem(!0),r},ks=function(n){return 1/pe*n*ai},ds=function(){var i=l,t=ao(),r=lo(),o,e,n;return t>l?i=t:l>r&&(i=r),e=1,n=lu,vu&&!ue&&!yu&&t>l?(u.close(),!0):(vu&&(o=function(t){vt((e-n)*t+n)}),u.zoomTo(i,0,300,f.easing.cubic.out,o),!0)};lr("Gestures",{publicMethods:{initGestures:function(){var n=function(n,t,i,r,u){rf=n+t,wu=n+i,gr=n+r,cu=u?n+u:""};ii=a.pointerEvent,ii&&a.touch&&(a.touch=!1),ii?navigator.pointerEnabled?n("pointer","down","move","up","cancel"):n("MSPointer","Down","Move","Up","Cancel"):a.touch?(n("touch","start","move","end","cancel"),at=!0):n("mouse","down","move","up"),sr=wu+" "+gr+" "+cu,ku=rf,ii&&!at&&(at=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),u.likelyTouchDevice=at,b[rf]=ws,b[wu]=ps,b[gr]=bs,cu&&(b[cu]=b[gr]),a.touch&&(ku+=" mousedown",sr+=" mousemove mouseup",b.mousedown=b[rf],b.mousemove=b[wu],b.mouseup=b[gr]),at||(o.allowPanToNext=!1)}}});var yi,bi,of,ur,si,ut,nh,we=function(t,i,r,h){var a,y,v,b,w;if(yi&&clearTimeout(yi),ur=!0,of=!0,t.initialLayout?(a=t.initialLayout,t.initialLayout=null):a=o.getThumbBoundsFn&&o.getThumbBoundsFn(s),y=r?o.hideAnimationDuration:o.showAnimationDuration,v=function(){wr("initialZoom"),r?(u.template.removeAttribute("style"),u.bg.removeAttribute("style")):(vt(1),i&&(i.style.display="block"),f.addClass(n,"pswp--animated-in"),c("initialZoom"+(r?"OutEnd":"InEnd"))),h&&h(),ur=!1},!y||!a||void 0===a.x)return b=function(){c("initialZoom"+(r?"Out":"In")),l=t.initialZoomLevel,it(e,t.initialPosition),p(),n.style.opacity=r?0:1,vt(1),v()},void b();w=function(){var s=fe,i=!u.currItem.src||u.currItem.loadError||o.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(l=a.w/t.w,e.x=a.x,e.y=a.y-tu,u[i?"template":"bg"].style.opacity=.001,p()),he("initialZoom"),r&&!s&&f.removeClass(n,"pswp--animated-in"),i&&(r?f[(s?"remove":"add")+"Class"](n,"pswp--animate_opacity"):setTimeout(function(){f.addClass(n,"pswp--animate_opacity")},30)),yi=setTimeout(function(){if(c("initialZoom"+(r?"Out":"In")),r){var b=a.w/t.w,u={x:e.x,y:e.y},k=l,o=tu,w=lu,h=function(t){kf&&(o=f.getScrollY(),kf=!1),1===t?(l=b,e.x=a.x,e.y=a.y-o):(l=(b-k)*t+k,e.x=(a.x-u.x)*t+u.x,e.y=(a.y-o-u.y)*t+u.y),p(),i?n.style.opacity=1-t:vt(w-t*w)};s?br("initialZoom",0,1,y,f.easing.cubic.out,h,v):(h(1),yi=setTimeout(v,y+20))}else l=t.initialZoomLevel,it(e,t.initialPosition),p(),vt(1),i?n.style.opacity=1:vt(1),yi=setTimeout(v,y+20)},r?25:90)},w()},ot={},wi=[],eh={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return bi.length}},de=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},uh=function(n,t,i){var r=n.bounds;r.center.x=Math.round((ot.x-t)/2),r.center.y=Math.round((ot.y-i)/2)+n.vGap.top,r.max.x=t>ot.x?Math.round(ot.x-t):r.center.x,r.max.y=i>ot.y?Math.round(ot.y-i)+n.vGap.top:r.center.y,r.min.x=t>ot.x?0:r.center.x,r.min.y=i>ot.y?n.vGap.top:r.center.y},er=function(n,t,i){var r,e,f,u;return n.src&&!n.loadError?(r=!i,(r&&(n.vGap||(n.vGap={top:0,bottom:0}),c("parseVerticalMargin",n)),ot.x=t.x,ot.y=t.y-n.vGap.top-n.vGap.bottom,r)&&(e=ot.x/n.w,f=ot.y/n.h,n.fitRatio=f>e?e:f,u=o.scaleMode,"orig"===u?i=1:"fit"===u&&(i=n.fitRatio),i>1&&(i=1),n.initialZoomLevel=i,n.bounds||(n.bounds=de())),!i)?void 0:(uh(n,n.w*i,n.h*i),r&&i===n.initialZoomLevel&&(n.initialPosition=n.bounds.center),n.bounds):(n.w=n.h=0,n.initialZoomLevel=n.fitRatio=1,n.bounds=de(),n.initialPosition=n.bounds.center,n.bounds)},ou=function(n,t,i,r,f,e){if(!t.loadError){var h,l=u.isDragging()&&!u.isZooming(),c=n===s||u.isMainScrollAnimating()||l;!f&&(at||o.alwaysFadeIn)&&c&&(h=!0),r&&(h&&(r.style.opacity=0),t.imageAppended=!0,i.appendChild(r),h&&setTimeout(function(){r.style.opacity=1,e&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500)},50))}},eo=function(n){n.loading=!0,n.loaded=!1;var t=n.img=f.createEl("pswp__img","img"),i=function(){n.loading=!1,n.loaded=!0,n.loadComplete?n.loadComplete(n):n.img=null,t.onload=t.onerror=null,t=null};return t.onload=i,t.onerror=function(){n.loadError=!0,i()},t.src=n.src,t},fo=function(n,t){if(n.src&&n.loadError&&n.container)return t&&(n.container.innerHTML=""),n.container.innerHTML=o.errorMsg.replace("%url%",n.src),!0},co=function(){if(wi.length){for(var n,t=0;t<wi.length;t++)n=wi[t],n.holder.index===n.index&&ou(n.index,n.item,n.baseDiv,n.img);wi=[]}};lr("Controller",{publicMethods:{lazyLoadItem:function(n){n=au(n);var t=si(n);t&&t.src&&!t.loaded&&!t.loading&&(c("gettingData",n,t),eo(t))},initController:function(){f.extend(o,eh,!0),u.items=bi=i,si=u.getItemAt,ut=o.getNumItemsFn,nh=o.loop,ut()<3&&(o.loop=!1),v("beforeChange",function(n){for(var f=o.preload,r=null===n?!0:n>0,e=Math.min(f[0],ut()),i=Math.min(f[1],ut()),t=1;(r?i:e)>=t;t++)u.lazyLoadItem(s+t);for(t=1;(r?e:i)>=t;t++)u.lazyLoadItem(s-t)}),v("initialLayout",function(){u.currItem.initialLayout=o.getThumbBoundsFn&&o.getThumbBoundsFn(s)}),v("mainScrollAnimComplete",co),v("initialZoomInEnd",co),v("destroy",function(){for(var n,t=0;t<bi.length;t++)n=bi[t],n.container&&(n.container=null),n.placeholder&&(n.placeholder=null),n.img&&(n.img=null),n.preloader&&(n.preloader=null),n.loadError&&(n.loaded=n.loadError=!1);wi=null})},getItemAt:function(n){return n>=0&&void 0!==bi[n]?bi[n]:!1},allowProgressiveImg:function(){return o.forceProgressiveLoading||!at||o.mouseUsed||screen.width>1200},setContent:function(n,t){var l,h,i,r,v,e;if(o.loop&&(t=au(t)),l=u.getItemAt(n.index),l&&(l.container=null),i=u.getItemAt(t),!i)return void(n.el.innerHTML="");c("gettingData",t,i),n.index=t,n.item=i,r=i.container=f.createEl("pswp__zoom-wrap"),(!i.src&&i.html&&(i.html.tagName?r.appendChild(i.html):r.innerHTML=i.html),fo(i),!i.src||i.loadError||i.loaded)?i.src&&!i.loadError&&(h=f.createEl("pswp__img","img"),h.style.webkitBackfaceVisibility="hidden",h.style.opacity=1,h.src=i.src,ou(t,i,r,h,!0)):((i.loadComplete=function(i){if(hi){if(i.img.style.webkitBackfaceVisibility="hidden",n&&n.index===t){if(fo(i,!0))return i.loadComplete=i.img=null,er(i,g),ru(i),void(n.index===s&&u.updateCurrZoomItem());i.imageAppended?!ur&&i.placeholder&&(i.placeholder.style.display="none",i.placeholder=null):a.transform&&(d||ur)?wi.push({item:i,baseDiv:r,img:i.img,index:t,holder:n}):ou(t,i,r,i.img,d||ur)}i.loadComplete=null,i.img=null,c("imageLoadComplete",t,i)}},f.features.transform)&&(v="pswp__img pswp__img--placeholder",v+=i.msrc?"":" pswp__img--placeholder--blank",e=f.createEl(v,i.msrc?"img":""),i.msrc&&(e.src=i.msrc),e.style.width=i.w+"px",e.style.height=i.h+"px",r.appendChild(e),i.placeholder=e),i.loading||eo(i),u.allowProgressiveImg()&&(!of&&a.transform?wi.push({item:i,baseDiv:r,img:i.img,index:t,holder:n}):ou(t,i,r,i.img,!0,!0))),er(i,g),of||t!==s?ru(i):(pt=r.style,we(i,h||i.img)),n.el.innerHTML="",n.el.appendChild(r)},cleanSlide:function(n){n.img&&(n.img.onload=n.img.onerror=null),n.loaded=n.loading=n.img=n.imageAppended=!1}}}),eu={},fu=function(n,t,i){var r=document.createEvent("CustomEvent"),u={origEvent:n,target:n.target,releasePoint:t,pointerType:i||"touch"};r.initCustomEvent("pswpTap",!0,!0,u),n.target.dispatchEvent(r)},lr("Tap",{publicMethods:{initTap:function(){v("firstTouchStart",u.onTapStart),v("touchRelease",u.onTapRelease),v("destroy",function(){eu={},ri=null})},onTapStart:function(n){n.length>1&&(clearTimeout(ri),ri=null)},onTapRelease:function(n,t){var i,r;if(t&&!ir&&!wf&&!iu){if(i=t,ri&&(clearTimeout(ri),ri=null,fs(i,eu)))return void c("doubleTap",i);if("mouse"===t.type)return void fu(n,t,"mouse");if(r=n.target.tagName.toUpperCase(),"BUTTON"===r||f.hasClass(n.target,"pswp__single-tap"))return void fu(n,t);it(eu,i),ri=setTimeout(function(){fu(n,t),ri=null},300)}}}}),lr("DesktopZoom",{publicMethods:{initDesktopZoom:function(){te||(at?v("mouseUsed",function(){u.setupDesktopZoom()}):u.setupDesktopZoom(!0))},setupDesktopZoom:function(t){var e,o,i,r;ct={},e="wheel mousewheel DOMMouseScroll",v("bindEvents",function(){f.bind(n,e,u.handleMouseWheel)}),v("unbindEvents",function(){ct&&f.unbind(n,e,u.handleMouseWheel)}),u.mouseZoomedIn=!1,i=function(){u.mouseZoomedIn&&(f.removeClass(n,"pswp--zoomed-in"),u.mouseZoomedIn=!1),1>l?f.addClass(n,"pswp--zoom-allowed"):f.removeClass(n,"pswp--zoom-allowed"),r()},r=function(){o&&(f.removeClass(n,"pswp--dragging"),o=!1)},v("resize",i),v("afterChange",i),v("pointerDown",function(){u.mouseZoomedIn&&(o=!0,f.addClass(n,"pswp--dragging"))}),v("pointerUp",r),t||i()},handleMouseWheel:function(n){if(l<=u.currItem.fitRatio)return o.closeOnScroll||n.preventDefault(),!0;if(n.preventDefault(),n.stopPropagation(),ct.x=0,"deltaX"in n)ct.x=n.deltaX,ct.y=n.deltaY;else if("wheelDelta"in n)n.wheelDeltaX&&(ct.x=-.16*n.wheelDeltaX),ct.y=n.wheelDeltaY?-.16*n.wheelDeltaY:-.16*n.wheelDelta;else{if(!("detail"in n))return;ct.y=n.detail}gf(l,!0),u.panTo(e.x-ct.x,e.y-ct.y)},toggleDesktopZoom:function(t){t=t||{x:g.x/2,y:g.y/2+tu};var r=o.getDoubleTapZoom(!0,u.currItem),i=l===r;u.mouseZoomedIn=!i,u.zoomTo(i?u.currItem.initialZoomLevel:r,t,333),f[(i?"remove":"add")+"Class"](n,"pswp--zoomed-in")}}});var ff,ho,dr,nf,ef,no,w,ki,af,pf,lt,hf,ls={history:!0,galleryUID:1},uf=function(){return lt.hash.substring(1)},ro=function(){ff&&clearTimeout(ff),dr&&clearTimeout(dr)},io=function(){var u=uf(),n={},r,t,i;if(u.length<5)return n;for(r=u.split("&"),t=0;t<r.length;t++)r[t]&&(i=r[t].split("="),i.length<2||(n[i[0]]=i[1]));return n.pid=parseInt(n.pid,10)-1,n.pid<0&&(n.pid=0),n},vf=function(){var n,t;if(dr&&clearTimeout(dr),iu||wt)return void(dr=setTimeout(vf,500));nf?clearTimeout(ho):nf=!0,n=w+"&gid="+o.galleryUID+"&pid="+(s+1),ki||-1===lt.hash.indexOf(n)&&(pf=!0),t=lt.href.split("#")[0]+"#"+n,hf?"#"+n!==window.location.hash&&history[ki?"replaceState":"pushState"]("",document.title,t):ki?lt.replace(t):lt.hash=n,ki=!0,ho=setTimeout(function(){nf=!1},60)};lr("History",{publicMethods:{initHistory:function(){var t,n;(f.extend(o,ls,!0),o.history)&&(lt=window.location,pf=!1,af=!1,ki=!1,w=uf(),hf="pushState"in history,w.indexOf("gid=")>-1&&(w=w.split("&gid=")[0],w=w.split("?gid=")[0]),v("afterChange",u.updateURL),v("unbindEvents",function(){f.unbind(window,"hashchange",u.onHashChange)}),t=function(){no=!0,af||(pf?history.back():w?lt.hash=w:hf?history.pushState("",document.title,lt.pathname+lt.search):lt.hash=""),ro()},v("unbindEvents",function(){fe&&t()}),v("destroy",function(){no||t()}),v("firstUpdate",function(){s=io().pid}),n=w.indexOf("pid="),n>-1&&(w=w.substring(0,n),"&"===w.slice(-1)&&(w=w.slice(0,-1))),setTimeout(function(){hi&&f.bind(window,"hashchange",u.onHashChange)},40))},onHashChange:function(){return uf()===w?(af=!0,void u.close()):void(nf||(ef=!0,u.goTo(io().pid),ef=!1))},updateURL:function(){ro(),ef||(ki?ff=setTimeout(vf,800):vf())}}}),f.extend(u,ss)}})