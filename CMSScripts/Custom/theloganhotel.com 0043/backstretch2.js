/*! Backstretch - v2.0.4 - 2013-06-19
* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2013 Scott Robbin; Licensed MIT */
(function(n,t,i){n.fn.backstretch=function(r,u){return(r===i||0===r.length)&&n.error("No images were supplied for Backstretch"),0===n(t).scrollTop()&&t.scrollTo(0,0),this.each(function(){var i=n(this),t=i.data("backstretch");if(t){if("string"==typeof r&&"function"==typeof t[r]){t[r](u);return}u=n.extend(t.options,u),t.destroy(!0)}t=new c(this,r,u),i.data("backstretch",t)})},n.backstretch=function(t,i){return n(".imgs").backstretch(t,i).data("backstretch")},n.expr[":"].backstretch=function(t){return n(t).data("backstretch")!==i},n.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var l={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},v={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},c=function(i,r,u){this.options=n.extend({},n.fn.backstretch.defaults,u||{}),this.images=n.isArray(r)?r:[r],n.each(this.images,function(){n("<img />")[0].src=this}),this.isBody=i===document.body,this.$container=n(i),this.$root=this.isBody?h?n(t):n(document):this.$container,i=this.$container.children(".backstretch").first(),this.$wrap=i.length?i:n('<div class="backstretch"></div>').css(l).appendTo(this.$container),this.isBody||(i=this.$container.css("position"),r=this.$container.css("zIndex"),this.$container.css({position:"static"===i?"relative":i,zIndex:"auto"===r?0:r,background:"none"}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&h?"fixed":"absolute"}),this.index=0,this.show(this.index);n(t).on("resize.backstretch",n.proxy(this.resize,this)).on("orientationchange.backstretch",n.proxy(function(){this.isBody&&0===t.pageYOffset&&(t.scrollTo(0,1),this.resize())},this))};c.prototype={resize:function(){try{var e={left:0,top:0},f=this.isBody?this.$root.width():this.$root.innerWidth(),r=f,i=this.isBody?t.innerHeight?t.innerHeight:this.$root.height():this.$root.innerHeight(),n=r/this.$img.data("ratio"),u;n>=i?(u=(n-i)/2,this.options.centeredY&&(e.top="-"+u+"px")):(n=i,r=n*this.$img.data("ratio"),u=(r-f)/2,this.options.centeredX&&(e.left="-"+u+"px")),this.$wrap.css({width:f,height:i}).find("img:not(.deleteable)").css({width:r,height:n}).css(e)}catch(o){}return this},show:function(t){if(!(Math.abs(t)>this.images.length-1)){var i=this,u=i.$wrap.find("img").addClass("deleteable"),r={relatedTarget:i.$container[0]};return i.$container.trigger(n.Event("backstretch.before",r),[i,t]),this.index=t,clearInterval(i.interval),i.$img=n("<img />").css(v).bind("load",function(f){var e=this.width||n(f.target).width();f=this.height||n(f.target).height(),n(this).data("ratio",e/f),n(this).fadeIn(i.options.speed||i.options.fade,function(){u.remove(),i.paused||i.cycle(),n(["after","show"]).each(function(){i.$container.trigger(n.Event("backstretch."+this,r),[i,t])})}),i.resize()}).appendTo(i.$wrap),i.$img.attr("src",i.images[t]),i}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return 1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(n.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(i){n(t).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),i||this.$wrap.remove(),this.$container.removeData("backstretch")}};var h,u=navigator.userAgent,s=navigator.platform,r=u.match(/AppleWebKit\/([0-9]+)/),r=!!r&&r[1],f=u.match(/Fennec\/([0-9]+)/),f=!!f&&f[1],o=u.match(/Opera Mobi\/([0-9]+)/),a=!!o&&o[1],e=u.match(/MSIE ([0-9]+)/),e=!!e&&e[1];h=!((-1<s.indexOf("iPhone")||-1<s.indexOf("iPad")||-1<s.indexOf("iPod"))&&r&&534>r||t.operamini&&"[object OperaMini]"==={}.toString.call(t.operamini)||o&&7458>a||-1<u.indexOf("Android")&&r&&533>r||f&&6>f||"palmGetResource"in t&&r&&534>r||-1<u.indexOf("MeeGo")&&-1<u.indexOf("NokiaBrowser/8.5.0")||e&&6>=e)})(jQuery,window)