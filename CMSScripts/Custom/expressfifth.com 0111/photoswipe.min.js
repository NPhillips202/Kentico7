/*! PhotoSwipe - v4.0.5 - 2015-01-15
* http://photoswipe.com
* Copyright (c) 2015 Dmitry Semenov; */
!function(n,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():n.PhotoSwipe=t()}(this,function(){"use strict";return function(n,t,i,r){var f={features:null,bind:function(n,t,i,r){var f=(r?"remove":"add")+"EventListener",u;for(t=t.split(" "),u=0;u<t.length;u++)t[u]&&n[f](t[u],i,!1)},isArray:function(n){return n instanceof Array},createEl:function(n,t){var i=document.createElement(t||"div");return n&&(i.className=n),i},getScrollY:function(){var n=window.pageYOffset;return void 0!==n?n:document.documentElement.scrollTop},unbind:function(n,t,i){f.bind(n,t,i,!0)},removeClass:function(n,t){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className=n.className.replace(i," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(n,t){f.hasClass(n,t)||(n.className+=(n.className?" ":"")+t)},hasClass:function(n,t){return n.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n.className)},getChildByClass:function(n,t){for(var i=n.firstChild;i;){if(f.hasClass(i,t))return i;i=i.nextSibling}},arraySearch:function(n,t,i){for(var r=n.length;r--;)if(n[r][i]===t)return r;return-1},extend:function(n,t,i){for(var r in t)if(t.hasOwnProperty(r)){if(i&&n.hasOwnProperty(r))continue;n[r]=t[r]}},easing:{sine:{out:function(n){return Math.sin(n*(Math.PI/2))},inOut:function(n){return-(Math.cos(Math.PI*n)-1)/2}},cubic:{out:function(n){return--n*n*n+1}}},detectFeatures:function(){var h,i,c,u,e,l;if(f.features)return f.features;var a=f.createEl(),v=a.style,t="",n={};(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,n.pointerEvent)||(h=navigator.userAgent,/iP(hone|od)/.test(navigator.platform)&&(i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i&&i.length>0&&(i=parseInt(i[1],10),i>=1&&8>i&&(n.isOldIOSPhone=!0))),c=h.match(/Android\s([0-9\.]*)/),u=c?c[1]:0,u=parseFloat(u),u>=1&&(4.4>u&&(n.isOldAndroid=!0),n.androidVersion=u),n.isMobileOpera=/opera mini|opera mobi/i.test(h));for(var r,s,y=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],o=0;4>o;o++){for(t=p[o],e=0;3>e;e++)r=y[e],s=t+(t?r.charAt(0).toUpperCase()+r.slice(1):r),!n[r]&&s in v&&(n[r]=s);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}return n.raf||(l=0,n.raf=function(n){var i=+new Date,t=Math.max(0,16-(i-l)),r=window.setTimeout(function(){n(i+t)},t);return l=i+t,r},n.caf=function(n){clearTimeout(n)}),n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,f.features=n,n}},kt,ou,fu,lt;f.detectFeatures(),f.features.oldIE&&(f.bind=function(n,t,i,r){t=t.split(" ");for(var u,e=(r?"detach":"attach")+"Event",o=function(){i.handleEvent.call(i)},f=0;f<t.length;f++)if(u=t[f])if("object"==typeof i&&i.handleEvent){if(r){if(!i["oldIE"+u])return!1}else i["oldIE"+u]=o;n[e]("on"+u,i["oldIE"+u])}else n[e]("on"+u,i)});var u=this,eo=25,ri=3,o={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(n){return"A"===n.tagName},getDoubleTapZoom:function(n,t){return n?1:t.initialZoomLevel<.7?1:1.5},maxSpreadZoom:2,scaleMode:"fit",modal:!0,alwaysFadeIn:!1};f.extend(o,r);var wi,ro,fe,s,uo,bt,er,bu,b,l,ei,ee,re,ue,he,vo,ce,y,lo,gu,vu,dr,eu,kr,dt,ht,hu,oe,co,or,se,tu,a,ve,su,ru,kf,nu,br,wt,df,pi,ir,lu,li,ut,yt,no,io,h,vt,nt,ci,wf,nf,rf,yu,wu,gt=function(){return{x:0,y:0}},ii=gt(),di=gt(),e=gt(),k={},oi=0,ot=gt(),st=0,pu=!0,bf=[],iu={},pr=function(n,t){f.extend(u,t.publicMethods),bf.push(n)},du=function(n){var t=et();return n>t-1?n-t:0>n?t+n:n},fr={},v=function(n,t){return fr[n]||(fr[n]=[]),fr[n].push(t)},c=function(n){var i=fr[n],r,t;if(i)for(r=Array.prototype.slice.call(arguments),r.shift(),t=0;t<i.length;t++)i[t].apply(u,r)},at=function(){return+new Date},pt=function(n){rf=n,u.bg.style.opacity=n*o.bgOpacity},ge=function(n,t,i,r){n[kr]=ee+t+"px, "+i+"px"+re+" scale("+r+")"},w=function(){vt&&ge(vt,e.x,e.y,l)},ar=function(n){n.container&&ge(n.container.style,n.initialPosition.x,n.initialPosition.y,n.initialZoomLevel)},ki=function(n,t){t[kr]=ee+n+"px, 0px"+re},tf=function(n,t){if(!o.loop&&t){var r=s+(ot.x*oi-n)/ot.x,i=Math.round(n-ni.x);(0>r&&i>0||r>=et()-1&&0>i)&&(n=ni.x+i*o.mainScrollEndFriction)}ni.x=n,ki(n,uo)},te=function(n,t){var i=hr[n]-vo[n];return di[n]+ii[n]+i-i*(t/ei)},d=function(n,t){n.x=t.x,n.y=t.y,t.id&&(n.id=t.id)},ts=function(n){n.x=Math.round(n.x),n.y=Math.round(n.y)},ie=null,gf=function(){ie&&(f.unbind(document,"mousemove",gf),f.addClass(n,"pswp--has_mouse"),o.mouseUsed=!0,c("mouseUsed")),ie=setTimeout(function(){ie=null},100)},ss=function(){f.bind(document,"keydown",u),a.transform&&f.bind(u.scrollWrap,"click",u),o.mouseUsed||f.bind(document,"mousemove",gf),f.bind(window,"resize scroll",u),c("bindEvents")},es=function(){f.unbind(window,"resize",u),f.unbind(window,"scroll",b.scroll),f.unbind(document,"keydown",u),f.unbind(document,"mousemove",gf),a.transform&&f.unbind(u.scrollWrap,"click",u),wt&&f.unbind(window,er,u),c("unbindEvents")},ne=function(n,t){var i=gr(u.currItem,k,n);return t&&(h=i),i},wo=function(n){return n||(n=u.currItem),n.initialZoomLevel},is=function(n){return n||(n=u.currItem),n.w>0?o.maxSpreadZoom:1},pe=function(n,t,i,r){return r===u.currItem.initialZoomLevel?(i[n]=u.currItem.initialPosition[n],!0):(i[n]=te(n,r),i[n]>t.min[n]?(i[n]=t.min[n],!0):i[n]<t.max[n]?(i[n]=t.max[n],!0):!1)},oh=function(){if(kr){var t=a.perspective&&!ht;return ee="translate"+(t?"3d(":"("),void(re=a.perspective?", 0px)":")")}kr="left",f.addClass(n,"pswp--ie"),ki=function(n,t){t.left=n+"px"},ar=function(n){var t=n.container.style,r=n.fitRatio*n.w,i=n.fitRatio*n.h;t.width=r+"px",t.height=i+"px",t.left=n.initialPosition.x+"px",t.top=n.initialPosition.y+"px"},w=function(){if(vt){var t=vt,n=u.currItem,r=n.fitRatio*n.w,i=n.fitRatio*n.h;t.width=r+"px",t.height=i+"px",t.left=e.x+"px",t.top=e.y+"px"}}},th=function(n){var t="";o.escKey&&27===n.keyCode?t="close":o.arrowKeys&&(37===n.keyCode?t="prev":39===n.keyCode&&(t="next")),t&&(n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||(n.preventDefault?n.preventDefault():n.returnValue=!1,u[t]()))},os=function(n){n&&(ir||pi||nt||nu)&&(n.preventDefault(),n.stopPropagation())},us=function(){ce=!0,o.closeOnScroll&&wi&&(!u.likelyTouchDevice||o.mouseUsed)&&Math.abs(f.getScrollY()-or)>2&&(fe=!0,u.close())},rt={},cr=0,vr=function(n){rt[n]&&(rt[n].raf&&oe(rt[n].raf),cr--,delete rt[n])},ae=function(n){rt[n]&&vr(n),rt[n]||(cr++,rt[n]={})},lr=function(){for(var n in rt)rt.hasOwnProperty(n)&&vr(n)},yr=function(n,t,i,r,u,f,e){var s,h=at(),o;ae(n),o=function(){if(rt[n]){if(s=at()-h,s>=r)return vr(n),f(i),void(e&&e());f((i-t)*u(s/r)+t),rt[n].raf=hu(o)}},o()},hs={shout:c,listen:v,viewportSize:k,options:o,isMainScrollAnimating:function(){return nt},getZoomLevel:function(){return l},getCurrentIndex:function(){return s},isDragging:function(){return wt},isZooming:function(){return yt},applyZoomPan:function(n,t,i){e.x=t,e.y=i,l=n,w()},init:function(){var i,e,h,r;if(!wi&&!ro){for(u.framework=f,u.template=n,u.bg=f.getChildByClass(n,"pswp__bg"),co=n.className,wi=!0,a=f.detectFeatures(),hu=a.raf,oe=a.caf,kr=a.transform,se=a.oldIE,u.scrollWrap=f.getChildByClass(n,"pswp__scroll-wrap"),u.container=f.getChildByClass(u.scrollWrap,"pswp__container"),uo=u.container.style,u.itemHolders=y=[{el:u.container.children[0],wrap:0,index:-1},{el:u.container.children[1],wrap:0,index:-1},{el:u.container.children[2],wrap:0,index:-1}],y[0].el.style.display=y[2].el.style.display="none",oh(),b={resize:u.updateSize,scroll:us,keydown:th,click:os},e=a.isOldIOSPhone||a.isOldAndroid||a.isMobileOpera,a.animationName&&a.transform&&!e||(o.showAnimationDuration=o.hideAnimationDuration=0),i=0;i<bf.length;i++)u["init"+bf[i]]();for(t&&(h=u.ui=new t(u,f),h.init()),c("firstUpdate"),s=s||o.index||0,(isNaN(s)||0>s||s>=et())&&(s=0),u.currItem=hi(s),(a.isOldIOSPhone||a.isOldAndroid)&&(pu=!1),o.modal&&(n.setAttribute("aria-hidden","false"),pu?n.style.position="fixed":(n.style.position="absolute",n.style.top=f.getScrollY()+"px")),void 0===tu&&(c("initialLayout"),tu=or=f.getScrollY()),r="pswp--open ",o.mainClass&&(r+=o.mainClass+" "),o.showHideOpacity&&(r+="pswp--animate_opacity "),r+=ht?"pswp--touch":"pswp--notouch",r+=a.animationName?" pswp--css_animation":"",r+=a.svg?" pswp--svg":"",f.addClass(n,r),u.updateSize(),bt=-1,st=null,i=0;ri>i;i++)ki((i+bt)*ot.x,y[i].el.style);se||f.bind(u.scrollWrap,bu,u),v("initialZoomInEnd",function(){u.setContent(y[0],s-1),u.setContent(y[2],s+1),y[0].el.style.display=y[2].el.style.display="block",o.focus&&n.focus(),ss()}),u.setContent(y[1],s),u.updateCurrItem(),c("afterInit"),pu||(ue=setInterval(function(){cr||wt||yt||l!==u.currItem.initialZoomLevel||u.updateSize()},1e3)),f.addClass(n,"pswp--visible")}},close:function(){wi&&(wi=!1,ro=!0,c("close"),es(),ke(u.currItem,null,!0,u.destroy))},destroy:function(){c("destroy"),si&&clearTimeout(si),o.modal&&(n.setAttribute("aria-hidden","true"),n.className=co),ue&&clearInterval(ue),f.unbind(u.scrollWrap,bu,u),f.unbind(window,"scroll",u),ff(),lr(),fr=null},panTo:function(n,t,i){i||(n>h.min.x?n=h.min.x:n<h.max.x&&(n=h.max.x),t>h.min.y?t=h.min.y:t<h.max.y&&(t=h.max.y)),e.x=n,e.y=t,w()},handleEvent:function(n){n=n||window.event,b[n.type]&&b[n.type](n)},goTo:function(n){n=du(n);var t=n-s;st=t,s=n,u.currItem=hi(s),oi-=t,tf(ot.x*oi),lr(),nt=!1,u.updateCurrItem()},next:function(){u.goTo(s+1)},prev:function(){u.goTo(s-1)},updateCurrZoomItem:function(n){if(n&&c("beforeChange",0),y[1].el.children.length){var t=y[1].el.children[0];vt=f.hasClass(t,"pswp__zoom-wrap")?t.style:null}else vt=null;h=u.currItem.bounds,ei=l=u.currItem.initialZoomLevel,e.x=h.center.x,e.y=h.center.y,n&&c("afterChange")},invalidateCurrItems:function(){he=!0;for(var n=0;ri>n;n++)y[n].item&&(y[n].item.needsUpdate=!0)},updateCurrItem:function(n){var t,i,r,f;if(0!==st&&(i=Math.abs(st),!(n&&2>i))){for(u.currItem=hi(s),c("beforeChange",st),i>=ri&&(bt+=st+(st>0?-ri:ri),i=ri),r=0;i>r;r++)st>0?(t=y.shift(),y[ri-1]=t,bt++,ki((bt+2)*ot.x,t.el.style),u.setContent(t,s-i+r+1+1)):(t=y.pop(),y.unshift(t),bt--,ki(bt*ot.x,t.el.style),u.setContent(t,s+i-r-2));vt&&1===Math.abs(st)&&(f=hi(lo),f.initialZoomLevel!==l&&(gr(f,k),ar(f))),st=0,u.updateCurrZoomItem(),lo=s,c("afterChange")}},updateSize:function(t){var p,a,i,v,r;if(!pu){if(p=f.getScrollY(),tu!==p&&(n.style.top=p+"px",tu=p),!t&&iu.x===window.innerWidth&&iu.y===window.innerHeight)return;iu.x=window.innerWidth,iu.y=window.innerHeight,n.style.height=iu.y+"px"}if(k.x=u.scrollWrap.clientWidth,k.y=u.scrollWrap.clientHeight,vo={x:0,y:tu},ot.x=k.x+Math.round(k.x*o.spacing),ot.y=k.y,tf(ot.x*oi),c("beforeResize"),void 0!==bt){for(r=0;ri>r;r++)a=y[r],ki((r+bt)*ot.x,a.el.style),v=du(s+r-1),i=hi(v),he||i.needsUpdate||!i.bounds?(i&&u.cleanSlide(i),u.setContent(a,v),1===r&&(u.currItem=i,u.updateCurrZoomItem(!0)),i.needsUpdate=!1):-1===a.index&&v>=0&&u.setContent(a,v),i&&i.container&&(gr(i,k),ar(i));he=!1}ei=l=u.currItem.initialZoomLevel,h=u.currItem.bounds,h&&(e.x=h.center.x,e.y=h.center.y,w()),c("resize")},zoomTo:function(n,t,i,r,u){var c,o,a,s,h;t&&(ei=l,hr.x=Math.abs(t.x)-e.x,hr.y=Math.abs(t.y)-e.y,d(di,e)),c=ne(n,!1),o={},pe("x",c,o,n),pe("y",c,o,n),a=l,s={x:e.x,y:e.y},ts(o),h=function(t){1===t?(l=n,e.x=o.x,e.y=o.y):(l=(n-a)*t+a,e.x=(o.x-s.x)*t+s.x,e.y=(o.y-s.y)*t+s.y),u&&u(t),w()},i?yr("customZoomTo",0,1,i,r||f.easing.sine.inOut,h):h(1)}},so=30,le=10,it={},yi={},g={},tt={},rr={},ui=[],ai={},vi=[],nr={},au=0,uu=gt(),cf=0,ni=gt(),hr=gt(),tr=gt(),ks=function(n,t){return n.x===t.x&&n.y===t.y},vs=function(n,t){return Math.abs(n.x-t.x)<eo&&Math.abs(n.y-t.y)<eo},de=function(n,t){return nr.x=Math.abs(n.x-t.x),nr.y=Math.abs(n.y-t.y),Math.sqrt(nr.x*nr.x+nr.y*nr.y)},ff=function(){lu&&(oe(lu),lu=null)},rs=function(){wt&&(lu=hu(rs),eh())},rh=function(){return!("fit"===o.scaleMode&&l===u.currItem.initialZoomLevel)},yo=function(n,t){return n?n.className&&n.className.indexOf("pswp__scroll-wrap")>-1?!1:t(n)?n:yo(n.parentNode,t):!1},yf={},ko=function(n,t){return yf.prevent=!yo(n.target,o.isClickableElement),c("preventDragEvent",n,t,yf),yf.prevent},go=function(n,t){return t.x=n.pageX,t.y=n.pageY,t.id=n.identifier,t},ns=function(n,t,i){i.x=.5*(n.x+t.x),i.y=.5*(n.y+t.y)},as=function(n,t,i){if(n-su>50){var r=vi.length>2?vi.shift():{};r.x=t,r.y=i,vi.push(r),su=n}},bo=function(){var n=e.y-u.currItem.initialPosition.y;return 1-Math.abs(n/(k.y/2))},sr={},fs={},ti=[],lf=function(n){for(;ti.length>0;)ti.pop();return dt?(wu=0,ui.forEach(function(n){0===wu?ti[0]=n:1===wu&&(ti[1]=n),wu++})):n.type.indexOf("touch")>-1?n.touches&&n.touches.length>0&&(ti[0]=go(n.touches[0],sr),n.touches.length>1&&(ti[1]=go(n.touches[1],fs))):(sr.x=n.pageX,sr.y=n.pageY,sr.id="",ti[0]=sr),ti},po=function(n,t){var f,v,a,i,y=0,r=e[n]+t[n],p=t[n]>0,s=ni.x+t.x,c=ni.x-ai.x;return f=r>h.min[n]||r<h.max[n]?o.panEndFriction:1,r=e[n]+t[n]*f,!o.allowPanToNext&&l!==u.currItem.initialZoomLevel||(vt?"h"!==ci||"x"!==n||pi||(p?(r>h.min[n]&&(f=o.panEndFriction,y=h.min[n]-r,v=h.min[n]-di[n]),(0>=v||0>c)&&et()>1?(i=s,0>c&&s>ai.x&&(i=ai.x)):h.min.x!==h.max.x&&(a=r)):(r<h.max[n]&&(f=o.panEndFriction,y=r-h.max[n],v=di[n]-h.max[n]),(0>=v||c>0)&&et()>1?(i=s,c>0&&s<ai.x&&(i=ai.x)):h.min.x!==h.max.x&&(a=r))):i=s,"x"!==n)?void(nt||li||l>u.currItem.fitRatio&&(e[n]+=t[n]*f)):(void 0!==i&&(tf(i,!0),li=i===ai.x?!1:!0),h.min.x!==h.max.x&&(void 0!==a?e.x=a:li||(e.x+=t.x*f)),void 0!==i)},ih=function(n){var i,t,r;if(!("mousedown"===n.type&&n.button>0)){if(gi)return void n.preventDefault();br&&"mousedown"===n.type||((ko(n,!0)&&n.preventDefault(),c("pointerDown"),dt)&&(i=f.arraySearch(ui,n.pointerId,"id"),0>i&&(i=ui.length),ui[i]={x:n.pageX,y:n.pageY,id:n.pointerId}),t=lf(n),r=t.length,ut=null,lr(),wt&&1!==r||(wt=wf=!0,f.bind(window,er,u),kf=yu=nf=nu=li=ir=df=pi=!1,ci=null,c("firstTouchStart",t),d(di,e),ii.x=ii.y=0,d(tt,t[0]),d(rr,tt),ai.x=ot.x*oi,vi=[{x:tt.x,y:tt.y}],su=ve=at(),ne(l,!0),ff(),rs()),!yt&&r>1&&!nt&&!li&&(ei=l,pi=!1,yt=df=!0,ii.y=ii.x=0,d(di,e),d(it,t[0]),d(yi,t[1]),ns(it,yi,tr),hr.x=Math.abs(tr.x)-e.x,hr.y=Math.abs(tr.y)-e.y,no=io=de(it,yi)))}},ys=function(n){var r,u,t,i;(n.preventDefault(),dt)&&(r=f.arraySearch(ui,n.pointerId,"id"),r>-1&&(u=ui[r],u.x=n.pageX,u.y=n.pageY)),wt&&(t=lf(n),ci||ir||yt?ut=t:(i=Math.abs(t[0].x-tt.x)-Math.abs(t[0].y-tt.y),Math.abs(i)>=le&&(ci=i>0?"h":"v",ut=t)))},eh=function(){var v,a,n,p,r,f,y;if(ut&&(v=ut.length,0!==v))if(d(it,ut[0]),g.x=it.x-tt.x,g.y=it.y-tt.y,yt&&v>1){if(tt.x=it.x,tt.y=it.y,!g.x&&!g.y&&ks(ut[1],yi))return;d(yi,ut[1]),pi||(pi=!0,c("zoomGestureStarted")),a=de(it,yi),n=nh(a),n>u.currItem.initialZoomLevel+u.currItem.initialZoomLevel/15&&(yu=!0);var t=1,i=wo(),s=is();i>n?o.pinchToClose&&!yu&&ei<=u.currItem.initialZoomLevel?(p=i-n,r=1-p/(i/1.2),pt(r),c("onPinchClose",r),nf=!0):(t=(i-n)/i,t>1&&(t=1),n=i-t*(i/3)):n>s&&(t=(n-s)/(6*i),t>1&&(t=1),n=s+t*i),0>t&&(t=0),no=a,ns(it,yi,uu),ii.x+=uu.x-tr.x,ii.y+=uu.y-tr.y,d(tr,uu),e.x=te("x",n),e.y=te("y",n),kf=n>l,l=n,w()}else{if(!ci)return;if(wf&&(wf=!1,Math.abs(g.x)>=le&&(g.x-=ut[0].x-rr.x),Math.abs(g.y)>=le&&(g.y-=ut[0].y-rr.y)),tt.x=it.x,tt.y=it.y,0===g.x&&0===g.y)return;if("v"===ci&&o.closeOnVerticalDrag&&!rh())return ii.y+=g.y,e.y+=g.y,f=bo(),nu=!0,c("onVerticalDrag",f),pt(f),void w();as(at(),it.x,it.y),ir=!0,h=u.currItem.bounds,y=po("x",g),y||(po("y",g),ts(e),w())}},fh=function(n){var i,v,k,o,y,t,r,b,s,h,p;if(a.isOldAndroid){if(br&&"mouseup"===n.type)return;n.type.indexOf("touch")>-1&&(clearTimeout(br),br=setTimeout(function(){br=0},600))}if(c("pointerUp"),ko(n,!1)&&n.preventDefault(),dt&&(v=f.arraySearch(ui,n.pointerId,"id"),v>-1&&((i=ui.splice(v,1)[0],navigator.pointerEnabled)?i.type=n.pointerType||"mouse":(k={4:"mouse",2:"touch",3:"pen"},i.type=k[n.pointerType],i.type||(i.type=n.pointerType||"mouse")))),y=lf(n),t=y.length,"mouseup"===n.type&&(t=0),2===t)return ut=null,!0;if(1===t&&d(rr,y[0]),0!==t||ci||nt||(i||("mouseup"===n.type?i={x:n.pageX,y:n.pageY,type:"mouse"}:n.changedTouches&&n.changedTouches[0]&&(i={x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY,type:"touch"})),c("touchRelease",n,i)),r=-1,0===t&&(wt=!1,f.unbind(window,er,u),ff(),yt?r=0:-1!==cf&&(r=at()-cf)),cf=1===t?at():-1,o=-1!==r&&150>r?"zoom":"swipe",yt&&2>t&&(yt=!1,1===t&&(o="zoomPointerUp"),c("zoomGestureEnded")),ut=null,ir||pi||nt||nu)if(lr(),ru||(ru=bs()),ru.calculateSwipeSpeed("x"),nu)b=bo(),.6>b?u.close():(s=e.y,h=rf,yr("verticalDrag",0,1,300,f.easing.cubic.out,function(n){e.y=(u.currItem.initialPosition.y-s)*n+s,pt((1-h)*n+h),w()}),c("onVerticalDrag",1));else{if((li||nt)&&0===t){if(p=ps(o,ru),p)return;o="zoomPointerUp"}if(!nt)return"swipe"!==o?void ds():void(!li&&l>u.currItem.fitRatio&&ws(ru))}},bs=function(){var t,i,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){vi.length>1?(t=at()-su+50,i=vi[vi.length-2][r]):(t=at()-ve,i=rr[r]),n.lastFlickOffset[r]=tt[r]-i,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickSpeed[r]=n.lastFlickDist[r]>20?n.lastFlickOffset[r]/t:0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(t,i){n.backAnimStarted[t]||(e[t]>h.min[t]?n.backAnimDestination[t]=h.min[t]:e[t]<h.max[t]&&(n.backAnimDestination[t]=h.max[t]),void 0!==n.backAnimDestination[t]&&(n.slowDownRatio[t]=.7,n.slowDownRatioReverse[t]=1-n.slowDownRatio[t],n.speedDecelerationRatioAbs[t]<.05&&(n.lastFlickSpeed[t]=0,n.backAnimStarted[t]=!0,yr("bounceZoomPan"+t,e[t],n.backAnimDestination[t],i||300,f.easing.sine.out,function(n){e[t]=n,w()}))))},calculateAnimOffset:function(t){n.backAnimStarted[t]||(n.speedDecelerationRatio[t]=n.speedDecelerationRatio[t]*(n.slowDownRatio[t]+n.slowDownRatioReverse[t]-n.slowDownRatioReverse[t]*n.timeDiff/10),n.speedDecelerationRatioAbs[t]=Math.abs(n.lastFlickSpeed[t]*n.speedDecelerationRatio[t]),n.distanceOffset[t]=n.lastFlickSpeed[t]*n.speedDecelerationRatio[t]*n.timeDiff,e[t]+=n.distanceOffset[t])},panAnimLoop:function(){if(rt.zoomPan&&(rt.zoomPan.raf=hu(n.panAnimLoop),n.now=at(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),w(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return e.x=Math.round(e.x),e.y=Math.round(e.y),w(),void vr("zoomPan")}};return n},ws=function(n){return n.calculateSwipeSpeed("y"),h=u.currItem.bounds,n.backAnimDestination={},n.backAnimStarted={},Math.abs(n.lastFlickSpeed.x)<=.05&&Math.abs(n.lastFlickSpeed.y)<=.05?(n.speedDecelerationRatioAbs.x=n.speedDecelerationRatioAbs.y=0,n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),!0):(ae("zoomPan"),n.lastNow=at(),void n.panAnimLoop())},ps=function(n,t){var r,e,a,v,l,i,h,y;return nt||(au=s),"swipe"===n&&(a=tt.x-rr.x,v=t.lastFlickDist.x<10,a>so&&(v||t.lastFlickOffset.x>20)?e=-1:-so>a&&(v||t.lastFlickOffset.x<-20)&&(e=1)),e&&(s+=e,0>s?(s=o.loop?et()-1:0,l=!0):s>=et()&&(s=o.loop?0:et()-1,l=!0),(!l||o.loop)&&(st+=e,oi-=e,r=!0)),h=ot.x*oi,y=Math.abs(h-ni.x),r||h>ni.x==t.lastFlickSpeed.x>0?(i=Math.abs(t.lastFlickSpeed.x)>0?y/Math.abs(t.lastFlickSpeed.x):333,i=Math.min(i,400),i=Math.max(i,250)):i=333,au===s&&(r=!1),nt=!0,yr("mainScroll",ni.x,h,i,f.easing.cubic.out,tf,function(){lr(),nt=!1,au=-1,(r||au!==s)&&u.updateCurrItem(),c("mainScrollAnimComplete")}),r&&u.updateCurrItem(!0),r},nh=function(n){return 1/io*n*ei},ds=function(){var i=l,t=wo(),r=is(),o,e,n;return t>l?i=t:l>r&&(i=r),e=1,n=rf,nf&&!kf&&!yu&&t>l?(u.close(),!0):(nf&&(o=function(t){pt((e-n)*t+n)}),u.zoomTo(i,0,300,f.easing.cubic.out,o),!0)};pr("Gestures",{publicMethods:{initGestures:function(){var n=function(n,t,i,r,u){gu=n+t,vu=n+i,dr=n+r,eu=u?n+u:""};dt=a.pointerEvent,dt&&a.touch&&(a.touch=!1),dt?navigator.pointerEnabled?n("pointer","down","move","up","cancel"):n("MSPointer","Down","Move","Up","Cancel"):a.touch?(n("touch","start","move","end","cancel"),ht=!0):n("mouse","down","move","up"),er=vu+" "+dr+" "+eu,bu=gu,dt&&!ht&&(ht=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),u.likelyTouchDevice=ht,b[gu]=ih,b[vu]=ys,b[dr]=fh,eu&&(b[eu]=b[dr]),a.touch&&(bu+=" mousedown",er+=" mousemove mouseup",b.mousedown=b[gu],b.mousemove=b[vu],b.mouseup=b[dr]),ht||(o.allowPanToNext=!1)}}});var si,bi,hf,gi,hi,et,ls,ke=function(t,i,r,h){var a,y,v,b,p;if(si&&clearTimeout(si),gi=!0,hf=!0,t.initialLayout?(a=t.initialLayout,t.initialLayout=null):a=o.getThumbBoundsFn&&o.getThumbBoundsFn(s),y=r?o.hideAnimationDuration:o.showAnimationDuration,v=function(){vr("initialZoom"),r?(u.template.removeAttribute("style"),u.bg.removeAttribute("style")):(pt(1),i&&(i.style.display="block"),f.addClass(n,"pswp--animated-in"),c("initialZoom"+(r?"OutEnd":"InEnd"))),h&&h(),gi=!1},!y||!a||void 0===a.x)return b=function(){c("initialZoom"+(r?"Out":"In")),l=t.initialZoomLevel,d(e,t.initialPosition),w(),n.style.opacity=r?0:1,pt(1),v()},void b();p=function(){var s=fe,i=!u.currItem.src||u.currItem.loadError||o.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(l=a.w/t.w,e.x=a.x,e.y=a.y-or,u[i?"template":"bg"].style.opacity=.001,w()),ae("initialZoom"),r&&!s&&f.removeClass(n,"pswp--animated-in"),i&&(r?f[(s?"remove":"add")+"Class"](n,"pswp--animate_opacity"):setTimeout(function(){f.addClass(n,"pswp--animate_opacity")},30)),si=setTimeout(function(){if(c("initialZoom"+(r?"Out":"In")),r){var b=a.w/t.w,u={x:e.x,y:e.y},k=l,o=or,p=rf,h=function(t){ce&&(o=f.getScrollY(),ce=!1),1===t?(l=b,e.x=a.x,e.y=a.y-o):(l=(b-k)*t+k,e.x=(a.x-u.x)*t+u.x,e.y=(a.y-o-u.y)*t+u.y),w(),i?n.style.opacity=1-t:pt(p-t*p)};s?yr("initialZoom",0,1,y,f.easing.cubic.out,h,v):(h(1),si=setTimeout(v,y+20))}else l=t.initialZoomLevel,d(e,t.initialPosition),w(),pt(1),i?n.style.opacity=1:pt(1),si=setTimeout(v,y+20)},r?25:90)},p()},ft={},fi=[],uh={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return bi.length}},to=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},gs=function(n,t,i){var r=n.bounds;r.center.x=Math.round((ft.x-t)/2),r.center.y=Math.round((ft.y-i)/2)+n.vGap.top,r.max.x=t>ft.x?Math.round(ft.x-t):r.center.x,r.max.y=i>ft.y?Math.round(ft.y-i)+n.vGap.top:r.center.y,r.min.x=t>ft.x?0:r.center.x,r.min.y=i>ft.y?n.vGap.top:r.center.y},gr=function(n,t,i){var r,e,f,u;return n.src&&!n.loadError?(r=!i,(r&&(n.vGap||(n.vGap={top:0,bottom:0}),c("parseVerticalMargin",n)),ft.x=t.x,ft.y=t.y-n.vGap.top-n.vGap.bottom,r)&&(e=ft.x/n.w,f=ft.y/n.h,n.fitRatio=f>e?e:f,u=o.scaleMode,"orig"===u?i=1:"fit"===u&&(i=n.fitRatio),i>1&&(i=1),n.initialZoomLevel=i,n.bounds||(n.bounds=to())),!i)?void 0:(gs(n,n.w*i,n.h*i),r&&i===n.initialZoomLevel&&(n.initialPosition=n.bounds.center),n.bounds):(n.w=n.h=0,n.initialZoomLevel=n.fitRatio=1,n.bounds=to(),n.initialPosition=n.bounds.center,n.bounds)},cu=function(n,t,i,r,f,e){if(!t.loadError){var h,l=u.isDragging()&&!u.isZooming(),c=n===s||u.isMainScrollAnimating()||l;!f&&(ht||o.alwaysFadeIn)&&c&&(h=!0),r&&(h&&(r.style.opacity=0),t.imageAppended=!0,i.appendChild(r),h&&setTimeout(function(){r.style.opacity=1,e&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500)},50))}},ye=function(n){n.loading=!0,n.loaded=!1;var t=n.img=f.createEl("pswp__img","img"),i=function(){n.loading=!1,n.loaded=!0,n.loadComplete?n.loadComplete(n):n.img=null,t.onload=t.onerror=null,t=null};return t.onload=i,t.onerror=function(){n.loadError=!0,i()},t.src=n.src,t},be=function(n,t){if(n.src&&n.loadError&&n.container)return t&&(n.container.innerHTML=""),n.container.innerHTML=o.errorMsg.replace("%url%",n.src),!0},we=function(){if(fi.length){for(var n,t=0;t<fi.length;t++)n=fi[t],n.holder.index===n.index&&cu(n.index,n.item,n.baseDiv,n.img);fi=[]}};pr("Controller",{publicMethods:{lazyLoadItem:function(n){n=du(n);var t=hi(n);t&&t.src&&!t.loaded&&!t.loading&&(c("gettingData",n,t),ye(t))},initController:function(){f.extend(o,uh,!0),u.items=bi=i,hi=u.getItemAt,et=o.getNumItemsFn,ls=o.loop,et()<3&&(o.loop=!1),v("beforeChange",function(n){for(var f=o.preload,e=null===n?!0:n>0,i=Math.min(f[0],et()),r=Math.min(f[1],et()),t=1;(e?r:i)>=t;t++)u.lazyLoadItem(s+t);for(t=1;(e?i:r)>=t;t++)u.lazyLoadItem(s-t)}),v("initialLayout",function(){u.currItem.initialLayout=o.getThumbBoundsFn&&o.getThumbBoundsFn(s)}),v("mainScrollAnimComplete",we),v("initialZoomInEnd",we),v("destroy",function(){for(var n,t=0;t<bi.length;t++)n=bi[t],n.container&&(n.container=null),n.placeholder&&(n.placeholder=null),n.img&&(n.img=null),n.preloader&&(n.preloader=null),n.loadError&&(n.loaded=n.loadError=!1);fi=null})},getItemAt:function(n){return n>=0&&void 0!==bi[n]?bi[n]:!1},allowProgressiveImg:function(){return o.forceProgressiveLoading||!ht||o.mouseUsed||screen.width>1200},setContent:function(n,t){var l,h,i,r,v,e;if(o.loop&&(t=du(t)),l=u.getItemAt(n.index),l&&(l.container=null),i=u.getItemAt(t),!i)return void(n.el.innerHTML="");c("gettingData",t,i),n.index=t,n.item=i,r=i.container=f.createEl("pswp__zoom-wrap"),(!i.src&&i.html&&(i.html.tagName?r.appendChild(i.html):r.innerHTML=i.html),be(i),!i.src||i.loadError||i.loaded)?i.src&&!i.loadError&&(h=f.createEl("pswp__img","img"),h.style.webkitBackfaceVisibility="hidden",h.style.opacity=1,h.src=i.src,cu(t,i,r,h,!0)):((i.loadComplete=function(i){if(wi){if(i.img.style.webkitBackfaceVisibility="hidden",n&&n.index===t){if(be(i,!0))return i.loadComplete=i.img=null,gr(i,k),ar(i),void(n.index===s&&u.updateCurrZoomItem());i.imageAppended?!gi&&i.placeholder&&(i.placeholder.style.display="none",i.placeholder=null):a.transform&&(nt||gi)?fi.push({item:i,baseDiv:r,img:i.img,index:t,holder:n}):cu(t,i,r,i.img,nt||gi)}i.loadComplete=null,i.img=null,c("imageLoadComplete",t,i)}},f.features.transform)&&(v="pswp__img pswp__img--placeholder",v+=i.msrc?"":" pswp__img--placeholder--blank",e=f.createEl(v,i.msrc?"img":""),i.msrc&&(e.src=i.msrc),e.style.width=i.w+"px",e.style.height=i.h+"px",r.appendChild(e),i.placeholder=e),i.loading||ye(i),u.allowProgressiveImg()&&(!hf&&a.transform?fi.push({item:i,baseDiv:r,img:i.img,index:t,holder:n}):cu(t,i,r,i.img,!0,!0))),gr(i,k),hf||t!==s?ar(i):(vt=r.style,ke(i,h||i.img)),n.el.innerHTML="",n.el.appendChild(r)},cleanSlide:function(n){n.img&&(n.img.onload=n.img.onerror=null),n.loaded=n.loading=n.img=n.imageAppended=!1}}}),ou={},fu=function(n,t,i){var r=document.createEvent("CustomEvent"),u={origEvent:n,target:n.target,releasePoint:t,pointerType:i||"touch"};r.initCustomEvent("pswpTap",!0,!0,u),n.target.dispatchEvent(r)},pr("Tap",{publicMethods:{initTap:function(){v("firstTouchStart",u.onTapStart),v("touchRelease",u.onTapRelease),v("destroy",function(){ou={},kt=null})},onTapStart:function(n){n.length>1&&(clearTimeout(kt),kt=null)},onTapRelease:function(n,t){var i,r;if(t&&!ir&&!df&&!cr){if(i=t,kt&&(clearTimeout(kt),kt=null,vs(i,ou)))return void c("doubleTap",i);if("mouse"===t.type)return void fu(n,t,"mouse");if(r=n.target.tagName.toUpperCase(),"BUTTON"===r||f.hasClass(n.target,"pswp__single-tap"))return void fu(n,t);d(ou,i),kt=setTimeout(function(){fu(n,t),kt=null},300)}}}}),pr("DesktopZoom",{publicMethods:{initDesktopZoom:function(){se||(ht?v("mouseUsed",function(){u.setupDesktopZoom()}):u.setupDesktopZoom(!0))},setupDesktopZoom:function(t){var e,o,i,r;lt={},e="wheel mousewheel DOMMouseScroll",v("bindEvents",function(){f.bind(n,e,u.handleMouseWheel)}),v("unbindEvents",function(){lt&&f.unbind(n,e,u.handleMouseWheel)}),u.mouseZoomedIn=!1,i=function(){u.mouseZoomedIn&&(f.removeClass(n,"pswp--zoomed-in"),u.mouseZoomedIn=!1),1>l?f.addClass(n,"pswp--zoom-allowed"):f.removeClass(n,"pswp--zoom-allowed"),r()},r=function(){o&&(f.removeClass(n,"pswp--dragging"),o=!1)},v("resize",i),v("afterChange",i),v("pointerDown",function(){u.mouseZoomedIn&&(o=!0,f.addClass(n,"pswp--dragging"))}),v("pointerUp",r),t||i()},handleMouseWheel:function(n){if(l<=u.currItem.fitRatio)return o.closeOnScroll||n.preventDefault(),!0;if(n.preventDefault(),n.stopPropagation(),lt.x=0,"deltaX"in n)lt.x=n.deltaX,lt.y=n.deltaY;else if("wheelDelta"in n)n.wheelDeltaX&&(lt.x=-.16*n.wheelDeltaX),lt.y=n.wheelDeltaY?-.16*n.wheelDeltaY:-.16*n.wheelDelta;else{if(!("detail"in n))return;lt.y=n.detail}ne(l,!0),u.panTo(e.x-lt.x,e.y-lt.y)},toggleDesktopZoom:function(t){t=t||{x:k.x/2,y:k.y/2+or};var r=o.getDoubleTapZoom(!0,u.currItem),i=l===r;u.mouseZoomedIn=!i,u.zoomTo(i?u.currItem.initialZoomLevel:r,t,333),f[(i?"remove":"add")+"Class"](n,"pswp--zoomed-in")}}});var uf,ho,wr,ku,vf,ao,p,ur,sf,of,ct,pf,cs={history:!0,galleryUID:1},af=function(){return ct.hash.substring(1)},fo=function(){uf&&clearTimeout(uf),wr&&clearTimeout(wr)},oo=function(){var u=af(),n={},r,t,i;if(u.length<5)return n;for(r=u.split("&"),t=0;t<r.length;t++)r[t]&&(i=r[t].split("="),i.length<2||(n[i[0]]=i[1]));return n.pid=parseInt(n.pid,10)-1,n.pid<0&&(n.pid=0),n},ef=function(){var n,t;if(wr&&clearTimeout(wr),cr||wt)return void(wr=setTimeout(ef,500));ku?clearTimeout(ho):ku=!0,n=p+"&gid="+o.galleryUID+"&pid="+(s+1),ur||-1===ct.hash.indexOf(n)&&(of=!0),t=ct.href.split("#")[0]+"#"+n,pf?"#"+n!==window.location.hash&&history[ur?"replaceState":"pushState"]("",document.title,t):ur?ct.replace(t):ct.hash=n,ur=!0,ho=setTimeout(function(){ku=!1},60)};pr("History",{publicMethods:{initHistory:function(){var t,n;(f.extend(o,cs,!0),o.history)&&(ct=window.location,of=!1,sf=!1,ur=!1,p=af(),pf="pushState"in history,p.indexOf("gid=")>-1&&(p=p.split("&gid=")[0],p=p.split("?gid=")[0]),v("afterChange",u.updateURL),v("unbindEvents",function(){f.unbind(window,"hashchange",u.onHashChange)}),t=function(){ao=!0,sf||(of?history.back():p?ct.hash=p:pf?history.pushState("",document.title,ct.pathname+ct.search):ct.hash=""),fo()},v("unbindEvents",function(){fe&&t()}),v("destroy",function(){ao||t()}),v("firstUpdate",function(){s=oo().pid}),n=p.indexOf("pid="),n>-1&&(p=p.substring(0,n),"&"===p.slice(-1)&&(p=p.slice(0,-1))),setTimeout(function(){wi&&f.bind(window,"hashchange",u.onHashChange)},40))},onHashChange:function(){return af()===p?(sf=!0,void u.close()):void(ku||(vf=!0,u.goTo(oo().pid),vf=!1))},updateURL:function(){fo(),vf||(ur?uf=setTimeout(ef,800):ef())}}}),f.extend(u,hs)}})