! function(e) {
    e.fn.responsiveMenu = function(n) {
        e.fn.responsiveMenu.defaultOptions = {
            mobileResulution: 767
        };
        var n = e.extend({}, e.fn.responsiveMenu.defaultOptions, n);
        return this.each(function(i) {
            function t(e) {
                b.removeClass("desk"), m.next().stop(!0, !0).slideUp(), h.removeClass("up"), b.slideUp(), e.find(".menu-icon").removeClass("active")
            }

            function s(n) {
                0 == n.find(".menu-icon").length && (n.prepend('<div class="menu-icon"></div>'), n.children(" ul").find("ul").prev("a").addClass("menubelow")), m = n.find("a.menubelow"), 0 == n.find(".arrow").length && (m.each(function() {
                    e(this).closest("li").prepend('<span class="arrow"></span>')
                }), h = n.find(".arrow"))
            }

            function o(n) {
                n.find(".arrow").on("touchstart click", function(n) {
                    n.stopImmediatePropagation(), n.preventDefault(), e(window).width() <= v && (e(this).next().length > 0 && (e(this).closest("li").siblings().find("ul").stop(!0, !0).slideUp(), e(this).closest("li").siblings().find("ul").each(function() {
                        e(this).prev().prev().removeClass("up")
                    })), e(this).next().next().is(":visible") ? (e(this).next().next().stop(!0, !0).slideUp(), e(this).removeClass("up")) : (e(this).closest("li").find(".menubelow").each(function() {
                        e(this).next().stop(!0, !0).slideUp(), e(this).prev().removeClass("up")
                    }), e(this).next().next().stop(!0, !0).slideDown(), e(this).addClass("up")))
                })
            }

            function l(n) {
                n.find(".menubelow").each(function() {
                    e(this).removeAttr("style"), e(this).next().removeAttr("style")
                }), n.find(".arrow").remove(), n.find(".menu-icon").removeClass("active"), n.find("ul.menu").addClass("desk").removeAttr("style"), n.find(".menu").removeAttr("style"), g = !1
            }

            function u(n) {
                e(window).width() <= v ? x || (t(n), s(n), o(n), x = !0, g = !1) : g || (n = e("#menuBlock"), l(n), x = !1, g = !0)
            }

            function d(e) {
                C = e.find(".menu-icon"), h = e.find(".arrow"), C.next().stop(!0, !0).slideUp(), C.removeClass("active"), h.removeClass("up"), e.find("ul.menu li ul").stop(!0, !0).slideUp()
            }

            function c() {
                var e = window.innerWidth;
                if (!e) {
                    var n = document.documentElement.getBoundingClientRect();
                    e = n.right - Math.abs(n.left)
                }
                r = document.body.clientWidth < e, f = a(), r && (v -= f)
            }

            function a() {
                var e = document.createElement("div");
                e.className = "scrollbar-measure", p.append(e);
                var n = e.offsetWidth - e.clientWidth;
                return p[0].removeChild(e), n
            }
            var r, f, m, h, p = e(document.body),
                v = n.mobileResulution,
                w = e("#menuBlock"),
                C = w.find(".menu-icon"),
                b = w.find("ul.menu"),
                x = !1,
                g = !1;
            c(), e(window).resize(function() {
                v = n.mobileResulution, c()
            }), s(w), u(w), e(window).resize(function(e) {
                u(w)
            }), e(document).on("click", ".menu-icon", function() {
                e(this).hasClass("active") ? (h.removeClass("up"), w.find(".menubelow").each(function() {
                    e(this).next().slideUp()
                }), e(this).next().slideUp(), e(this).removeClass("active")) : (e(this).next().slideDown(), e(this).addClass("active"))
            }), e(document).on("click", function(n) {
                e(window).width() <= v && (0 != e(n.target).closest("#menuBlock").length || e(n.target).hasClass("active") || d(w))
            })
        })
    }
}(jQuery);