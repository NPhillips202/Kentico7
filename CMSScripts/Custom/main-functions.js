function stripUrl(a){try{return a=a.replace(/http:/gi,""),a=a.replace(/https:/gi,""),a=a.replace(/www./gi,""),a=a.replace(/&/gi,"_"),a=a.replace(/#/gi,""),a=a.replace(/\/\//gi,"")}catch(a){return logMe("stripUrl err"),""}}function contains(a,b){return a.indexOf(b)>-1}function doesNotContains(a,b){return a.indexOf(b)==-1}function isJsLink(a){return contains(a,"javascript:")}function isMailToLink(a){return contains(a,"mailto:")}function isBookingDomainLink(a){return a=stripUrl(a),contains(a,jQuery("#Booking_Domain_Input").val())}function isInternalRelativeLink(a){return doesNotContains(a,":")}function isExternalLinkButNotBookingDomain(a){return a=stripUrl(a),logMe("strippedUrl"+a),doesNotContains(a,location.hostname)&&!isBookingDomainLink(a)}function isSameHostname(a){return a==location.hostname}function logMe(a){window.console&&window.console.log&&window.console.log(a)}function getLinkerUrl(a){var b=_gaq._getAsyncTracker(),c=b._getLinkerUrl(a);return c}function trackPageview(a){_gaq.push(["_trackPageview",a])}function trackEvent(a,b,c,d,e){_gaq.push(["_trackEvent",a,b])}function avSubmitOPL4Website(){var b=$("#hotelCode").val();if(""==b)jQuery("#hotelCodeContainer .sbHolder").addClass("redIt"),setTimeout(function(){$("#hotelCodeContainer .sbHolder").removeClass("redIt")},1e3);else{_gaq.push(["_trackPageview","/outgoing/check-availability"]);var c=jQuery("#requestType"),d=jQuery("#promo");""!=c.val()&&""!=d.val()&&"Promo Code"!=d.val()?jQuery("#availabilityform").submit():(c.attr("name",""),d.attr("name",""),jQuery("#availabilityform").submit(),c.attr("name","requestType"),d.attr("name","code"))}}jQuery(document).ready(function(){jQuery("a[href], area[href]").live("click",function(){var a=jQuery(this).attr("href"),b=jQuery(this).attr("hostname");if(logMe("current hostname: "+location.hostname+" -> destination hostname: "+b),isSameHostname(b))return logMe("isSameHostname"),!0;if(isJsLink(a))return logMe("isJsLink"),!0;if(isMailToLink(a))return trackPageview("/mailto/"+stripUrl(a)),logMe("isMailToLink"),!0;if(isBookingDomainLink(a)){if(trackPageview("/outgoing/check-availability"),jQuery(this).hasClass("popup")){var c="resizable,scrollbars,width=1020,height=600,top=800,left=800";return void 0!=jQuery(this).attr("rel")&&(c=jQuery(this).attr("rel")),window.open(getLinkerUrl(a),"",c),!1}return jQuery(this).attr("href",getLinkerUrl(a)),logMe("isBookingDomainLink"),!0}return isInternalRelativeLink(a)?(logMe("isInternalRelativeLink"),!0):isExternalLinkButNotBookingDomain(a)?(logMe("isExternalLinkButNotBookingDomain"),trackPageview("/outgoing/"+stripUrl(a)),!0):(logMe("is Returning true by default - absolute internal links - should not reach here. same domain returning b4 now"),!0)}),jQuery(".Booking_Mask").length>0&&(jQuery(".selectboxplugin select").selectbox({onChangeCallback:selectBoxChanged}),jQuery(".Booking_Mask").submit(function(){jQuery(".numbernights").length>0&&pushDate(getPushdate());var a=jQuery(this).serialize(),b=jQuery(this).attr("action"),c=b+"?"+a,d=getLinkerUrl(c);if(jQuery(this).hasClass("noGoogleLinkerUrl")&&(d=c),trackPageview("/outgoing/check-availability/"),jQuery(this).hasClass("resnet"))return GoBooking_Resnet(b),!1;if(jQuery(this).hasClass("iframe"))return window.open(d,jQuery(this).attr("target"),""),!1;if(jQuery(this).hasClass("popup")){var e="resizable,scrollbars,width=1020,height=600,top=800,left=800";return void 0!=jQuery(this).attr("rel")&&(e=jQuery(this).attr("rel")),window.open(d,"",e),!1}return window.open(d,jQuery(this).attr("target"),""),!1}),dateFormat="m/d/yy",jQuery("#startdate").length>0&&(jQuery.datepicker.setDefaults({minDate:0,buttonText:"",defaultDate:1,showOn:"both",buttonImageOnly:!1,dateFormat:dateFormat}),jQuery("#startdate").datepicker({onClose:function(){pushDate(getPushdate()),fillStartDateDropdowns(jQuery(this).val())}}),jQuery("#enddate").datepicker({beforeShow:minRange,defaultDate:0,onClose:function(){fillEndDateDropdowns(jQuery(this).val())}}),pushDate(getPushdate())),jQuery(".booking_submit").click(function(){jQuery(".Booking_Mask").submit()}))}),jQuery(function(){var a="-900px";Modernizr.touch?jQuery("*").click(function(b){if(thisEle=jQuery(this),thisEle.is("#nav > li > div > a")){b.stopPropagation();var c=thisEle.parent("div").children("ul");if(c.css("margin-top")==a)return jQuery("#nav > li > div > ul").css("margin-top",a),c.css("margin-top","0px"),!1}else jQuery("#nav > li > div > ul").css("margin-top",a)}):jQuery("*").mouseover(function(b){if(thisEle=jQuery(this),thisEle.is("#nav > li > div")){b.stopPropagation();var c=thisEle.children("ul");c.css("margin-top")==a&&c.css("margin-top","0px")}else jQuery("#nav > li > div > ul").css("margin-top",a)})}),jQuery(function(){if(jQuery(window).width()<=650)var a=jQuery(document).width(),b="80%";else var a="400px",b="500px";jQuery("a.gCard").colorbox({width:a,height:b,iframe:!0}),jQuery("a.gallery").colorbox({rel:"gallery1",closeButton:!0}),jQuery("a.map").colorbox({rel:"gallery2",closeButton:!0}),jQuery(".video-float").colorbox({iframe:!0,width:650,height:387})}),jQuery(function(){function b(){jQuery(".close-tabs").hasClass("collapsed")||(jQuery(".tabs-area .inner2").css("overflow","hidden"),jQuery(".availabityFormDiv h3").animate({top:"-3px"},500),jQuery(".tabs-area .inner2 > table").animate({"margin-top":"155px"},500,function(){jQuery(".resp-tab-active").removeClass("resp-tab-active"),jQuery(".close-tabs").addClass("collapsed"),jQuery(".close-tabs span").html("open")}))}function c(){jQuery(".close-tabs").hasClass("collapsed")&&(jQuery(".availabityFormDiv h3").animate({top:"0px"},500),jQuery(".tabs-area .inner2 > table").animate({"margin-top":"0px"},500,function(){jQuery(".tabs-area .inner2").css("overflow","visible")}),jQuery(".close-tabs").removeClass("collapsed"),jQuery(".close-tabs span").html("close"))}function e(){c(),jQuery(".resp-tab-content-active").each(function(){jQuery(this).removeClass("resp-tab-content-active"),jQuery(this).hide()}),jQuery(".resp-tab-active").removeClass("resp-tab-active")}function f(){e(),jQuery(".resp-tab-content").first().addClass("resp-tab-content-active"),jQuery(".resp-tab-content").first().show(),jQuery(".resp-tab-item").first().addClass("resp-tab-active")}function g(){switch(window.orientation){case 0:e();break;case 90:f();break;case-90:f();break;case 180:e()}}jQuery(".carousel").bxSlider({slideSelector:".eSpecials_all_table",mode:"horizontal",minSlides:1,maxSlides:2,moveSlides:1,slideWidth:9999,startSlide:0,preloadImages:"all",pager:!1}),jQuery("#horizontalTab").easyResponsiveTabs({type:"default",width:"auto",fit:!0});var a=jQuery(".carousel .eSpecials_all_table .eSpecials_more_info");a.each(function(){var a=jQuery(this).children("a").attr("href");jQuery(this).html('<a href="'+a+'" class="eSpecials_TextLink">MORE INFO</a>')}),jQuery("#horizontalTab").css("height","auto"),jQuery("#horizontalTab").css("overflow","visible"),document.width<=d&&e(),jQuery(".close-tabs").click(function(){b()}),jQuery(".tabs, .booking").click(function(){c()});var d=996;document.width<=d&&(window.onorientationchange=g),jQuery(window).resize(function(){document.width<=d?e():f()})}),jQuery(function(){jQuery(".pgal-float ul li a").qtip({hide:{fixed:!0,delay:500,type:"fade"},position:{at:"top left",adjust:{y:-28,x:10}}})}),jQuery(function(){jQuery(".select").selectbox(),jQuery(".select2").selectbox({classHolder:"sbHolder2",classSelector:"sbSelector2"})}),jQuery(window).load(function(){jQuery("#slider").nivoSlider({effect:"fade",slices:15,boxCols:8,boxRows:4,animSpeed:1200,pauseTime:8e3,startSlide:0,directionNav:!0,controlNav:!1,controlNavThumbs:!1,pauseOnHover:!1,manualAdvance:!1,prevText:"Prev",nextText:"Next",randomStart:!1,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){}})}),jQuery(window).ready(function(){var a=jQuery("#intMapBtn"),b=jQuery("#intMapFrame"),c="500px",d=600;a.click(function(e){e.preventDefault(),jQuery(".top").hasClass("open")?(jQuery(".top").removeClass("open"),a.removeClass("open"),b.animate({height:"0"},d)):(b.children("iframe").attr("src")<1&&b.children("iframe").attr("src","http://www.opalcollection.com/interactive-map/"),jQuery(".top").addClass("open"),a.addClass("open"),b.animate({height:c},d),jQuery("html, body").animate({scrollTop:b.offset().top},d))})}),jQuery(function(){jQuery(".eSpecials_image img").each(function(){var a=jQuery(this).width(),b=jQuery(this).height();if(a>b){jQuery(this).height(150),jQuery(this).width("auto");var c=jQuery(this).width(),d=(c-150)/2;jQuery(this).css("margin-left","-"+d+"px")}else jQuery(this).height("auto"),jQuery(this).width(150)})}),jQuery(function(){function a(){""!=jQuery("#requestType").val()&&""!=jQuery("#promo").val()&&"Promo Code"!=jQuery("#promo").val()?(jQuery(".no-rate").hide(),jQuery(".rate").show(),jQuery(".special-rates .rate .code").text(jQuery("#promo").val())):(jQuery(".no-rate").show(),jQuery(".rate").hide())}jQuery(".update-code").click(function(a){a.preventDefault(),jQuery(".special-rates-overlay").fadeIn(300)}),jQuery(".submit-promo").click(function(){jQuery(".special-rates-overlay").is(":visible")&&(jQuery("#requestType").selectbox("close"),a(),jQuery(".special-rates-overlay").fadeOut(300))}),jQuery("#adults").selectbox({classHolder:"sbHolder2",classSelector:"sbSelector2",effect:"slide"}),jQuery("#children").selectbox({classHolder:"sbHolder2",classSelector:"sbSelector2",effect:"slide"}),jQuery("#requestType").selectbox({classHolder:"sbHolderPromo",classSelector:"sbSelectorPromo",effect:"slide"})}),setInititialDates();